{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    Edwiser RemUI
    @package   theme_remui
    @copyright (c) 2020 WisdmLabs (https://wisdmlabs.com/)
    @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later

}}
{{!
    @template theme_remui/activity_navigation

    Display the activity navigation for all activities in a course

    Context variables required for this template:

    Example context (json):
    {
        "downloadurl": "#"
    }
}}
<div id="customQueryReportBlock" data-sesskey="{{sesskey}}">
    <div class="panel h-auto mb-0">
        <div class="panel-header clearfix">
            <div class="panel-title px-0">
                <strong>
                    {{#str}} customqueryreport, local_edwiserreports {{/str}}
                </strong>
            </div>
        </div>
        <div class="panel-body">
          <div id="edw_custom_reporttype" class="col-12 px-0 text-right">
              <div class="btn-group" data-toggle="buttons" role="group">
                  <label class="btn btn-outline btn-primary active">
                      <input type="radio" name="reporttype" value="courses" checked="" class="d-none">
                      {{#str}} course, local_edwiserreports {{/str}}
                  </label>
                  <label class="btn btn-outline btn-primary">
                      <input type="radio" name="reporttype" value="activities" class="d-none">
                      {{#str}} activity, local_edwiserreports {{/str}}
                  </label>
              </div>
          </div>
            <div class="row">
                <div class="col-md-4">
                      <label>Learning Programs</label>
                      <select id="ed_lps" class="js-states form-control select25">
                          {{> local_edwiserreports/customquery_lpoptions}}
                      </select>
                </div>
                <div class="col-md-4">
                      <label>Courses</label>
                      <select id="ed_courses" class="js-states form-control select25">
                        {{> local_edwiserreports/customquery_options}}
                      </select>
                </div>
                <div class="col-md-12 row px-0 mx-0 mt-2">
                    {{> local_edwiserreports/customquery_cohortoptions }}
                    </div>
              </div>
              <div class="row mx-0">
                  <div class="mr-25 mt-25 pl-15">
                      <label>{{#str}} enrolmentrangeselector, local_edwiserreports {{/str}}</label>
                      <div class="form-group w-250 mb-0">
                        <div class="input-search input-search-dark">
                            <input type="text" id="customqueryenrollstart" placeholder="{{#str}} selectdate, local_edwiserreports{{/str}}" class="form-control rounded w-full" data-input/>
                            <button type="button" class="input-search-close icon wb-close" aria-label="Close"></button>
                        </div>
                        <div class="input-search input-search-dark mt-10">
                            <input type="text" id="customqueryenrollend" placeholder="{{#str}} selectdate, local_edwiserreports{{/str}}" class="form-control rounded w-full" data-input/>
                            <button type="button" class="input-search-close icon wb-close" aria-label="Close"></button>
                        </div>
                    </div>
                  </div>
                  <div class="mr-25 mt-25 pl-25">
                      <label>{{#str}} completionrangeselector, local_edwiserreports {{/str}}</label>
                      <div class="form-group w-250 mb-0">
                        <div class="input-search input-search-dark">
                            <input type="text" id="customquerycompletionstart" placeholder="{{#str}} selectdate, local_edwiserreports{{/str}}" class="form-control rounded w-full" data-input/>
                            <button type="button" class="input-search-close icon wb-close" aria-label="Close"></button>
                        </div>
                        <div class="input-search input-search-dark mt-10">
                            <input type="text" id="customquerycompletionend" placeholder="{{#str}} selectdate, local_edwiserreports{{/str}}" class="form-control rounded w-full" data-input/>
                            <button type="button" class="input-search-close icon wb-close" aria-label="Close"></button>
                        </div>
                    </div>
                  </div>
              </div>
              <div class="row mt-25">
                  <div class="col-md-4">
                      <label>{{#str}} reportfields, local_edwiserreports {{/str}}</label>
                  </div>
              </div>
            <div class="userfields example-wrap reportfields">
              <h5 class="example-title">
                <strong> {{#str}} userfields, local_edwiserreports {{/str}} </strong>
                <a class="unselect-userfields pull-right text-sm" href="javascript:void(0)">
                    <small>{{#str}} unselectall, local_edwiserreports {{/str}}</small>
                </a>
                <a class="select-userfields pull-right text-sm hidden" href="javascript:void(0)">
                    <small>{{#str}} selectall, local_edwiserreports {{/str}}</small>
                </a>
              </h5>
              <div class="row">
                {{#reportfields.userfields}}
                <div class="{{key}} col-md-3">
                    <div class="checkbox-custom checkbox-primary">
                      <input type="checkbox" id="{{key}}" {{#disbaled}}disabled{{/disbaled}} checked>
                      <label for="{{key}}">{{value}}</label>
                    </div>
                </div>
                {{/reportfields.userfields}}
              </div>
            </div>
            <div class="coursefields example-wrap reportfields">
                <h5 class="example-title">
                    <strong> {{#str}} coursefields, local_edwiserreports {{/str}} </strong>
                    <a class="unselect-coursefields pull-right text-sm" href="javascript:void(0)">
                        <small>{{#str}} unselectall, local_edwiserreports {{/str}}</small>
                    </a>
                    <a class="select-coursefields pull-right text-sm hidden" href="javascript:void(0)">
                        <small>{{#str}} selectall, local_edwiserreports {{/str}}</small>
                    </a>
                </h5>
                <div class="row">
                    {{#reportfields.coursefields}}
                    <div class="{{key}} col-md-3">
                        <div class="checkbox-custom checkbox-primary">
                        <input type="checkbox" id="{{key}}" {{#disbaled}}disabled{{/disbaled}} checked>
                        <label for="{{key}}">{{value}}</label>
                      </div>
                    </div>
                    {{/reportfields.coursefields}}
                </div>
            </div>

            <div class="lpreportfields example-wrap reportfields">
              <h5 class="example-title">
                  <strong> {{#str}} lpfields, local_edwiserreports {{/str}} </strong>
                  <a class="unselect-lpreportfields pull-right text-sm" href="javascript:void(0)">
                  <small>{{#str}} unselectall, local_edwiserreports {{/str}}</small>
                  </a>
                  <a class="select-lpreportfields pull-right text-sm hidden" href="javascript:void(0)">
                      <small>{{#str}} selectall, local_edwiserreports {{/str}}</small>
                  </a>
              </h5>
              <div class="lpfields row">
                {{#reportfields.lpfields}}
                <div class="{{key}} col-md-3">
                  <div class="checkbox-custom checkbox-primary">
                      <input type="checkbox" id="{{key}}" {{#disbaled}}disabled{{/disbaled}} checked>
                      <label for="{{key}}">{{value}}</label>
                    </div>
                </div>
                {{/reportfields.lpfields}}
              </div>
            </div>

            <div class="activityreportfields example-wrap reportfields hidden">
              <h5 class="example-title">
                  <strong> {{#str}} activityfields, local_edwiserreports {{/str}} </strong>
                  <a class="unselect-lpreportfields pull-right text-sm" href="javascript:void(0)">
                  <small>{{#str}} unselectall, local_edwiserreports {{/str}}</small>
                  </a>
                  <a class="select-lpreportfields pull-right text-sm hidden" href="javascript:void(0)">
                      <small>{{#str}} selectall, local_edwiserreports {{/str}}</small>
                  </a>
              </h5>
              <div class="activityfields row">
                {{#reportfields.activityfields}}
                <div class="{{key}} col-md-3">
                  <div class="checkbox-custom checkbox-primary">
                      <input type="checkbox" id="{{key}}" {{#disbaled}}disabled{{/disbaled}}>
                      <label for="{{key}}">{{value}}</label>
                    </div>
                </div>
                {{/reportfields.activityfields}}
              </div>
            </div>

              <div class="row">
              <div class="col-md-3">
                    <div class="text-right mt-30">
                      <form action="{{downloadurl}}" target="_blank" method="post" id="customQueryReportsForm">
                          <input type="hidden" name="lps">
                          <input type="hidden" name="courses">
                          <input type="hidden" name="enrolstartdate"/>
                          <input type="hidden" name="enrolenddate"/>
                          <input type="hidden" name="completionstartdate"/>
                          <input type="hidden" name="completionenddate"/>
                          <input type="hidden" name="reporttype"/>
                          <input type="hidden" name="reportlevel" value="courses"/>
                          <input type="hidden" name="filters"/>
                          <input type="hidden" name="checkedFields"/>
                          <input type="hidden" name="cohortids"/>
                          <input type="hidden" name="userids"/>
                          <input type="hidden" name="activitytype"/>
                          <button type="submit" id="customQueryReportDownload" class="btn btn-secondary">
                              {{#str}} downloadreportincsv , local_edwiserreports {{/str}}
                          </button>
                      </form>
                </div>
              </div>
              <div class="col-md-5 mt-30">
                <div class="coursealert alert alert-danger hidden" role="alert">
                  <button type="button" class="close" data-hide="alert" aria-label="Close">
                    <span aria-hidden="true">×</span>
                  </button>
                  {{#str}} selectatleastonecvourse, local_edwiserreports {{/str}}
                </div>
                <div class="enroldatealert alert alert-danger hidden" role="alert">
                  <button type="button" class="close" data-hide="alert" aria-label="Close">
                    <span aria-hidden="true">×</span>
                  </button>
                  {{#str}} enroldatealert, local_edwiserreports {{/str}}
                </div>
                <div class="completiondatealert alert alert-danger hidden" role="alert">
                  <button type="button" class="close" data-hide="alert" aria-label="Close">
                    <span aria-hidden="true">×</span>
                  </button>
                  {{#str}} completiondatealert, local_edwiserreports {{/str}}
                </div>
              </div>
              </div>
        </div>
    </div>
</div>

{{#js}}
require(['local_edwiserreports/block_queryreport']);
{{/js}}
