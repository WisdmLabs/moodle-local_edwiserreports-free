"use strict";define(["jquery","./chart/apexcharts","./common","./defaultconfig"],function(e,t,a,o){var i={PANEL:"#courseactivitystatusblock",INSIGHT:"#courseactivitystatusblock .insight",FORMFILTER:'.download-links [name="filter"]',GRAPH:"#apex-chart-courseactivitystatus-block",STUDENT:"#courseactivitystatus-student-select",COURSE:"#courseactivitystatus-course-select"},s={GET_COURSEACTIVITYSTATUS:function(t){return e.ajax({url:o.requestUrl,type:o.requestType,dataType:o.requestDataType,data:{action:"get_courseactivitystatus_graph_data_ajax",secret:M.local_edwiserreports.secret,data:JSON.stringify({filter:t})}})}},r={date:"weekly",course:0,student:0},n=null,l={series:[],chart:{type:"line",height:350,dropShadow:{enabled:!0,color:"#000",top:18,left:7,blur:10,opacity:.2},toolbar:{show:!1,tools:{download:!1,reset:'<i class="fa fa-refresh"></i>'}},zoom:{enabled:!1}},markers:{size:0},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,followCursor:!1,intersect:!1,inverseOrder:!1,fillSeriesColor:!1,onDatasetHover:{highlightDataSeries:!1},y:{formatter:void 0,title:{}},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},stroke:{curve:"smooth",width:2},grid:{borderColor:"#e7e7e7"},xaxis:{categories:null,type:"datetime",labels:{hideOverlappingLabels:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:""}},tooltip:{enabled:!1}},legend:{position:"top",horizontalAlign:"left",offsetY:"-20",itemMargin:{horizontal:10,vertical:0}},dataLabels:{enabled:!1},colors:o.getColorTheme(),noData:{text:M.util.get_string("nographdata","local_edwiserreports")}};function c(o){a.loader.show(i.PANEL);var c=Object.keys(r).map(function(e){return r[e]}).join("-");e(i.PANEL).find(i.FORMFILTER).val(c),s.GET_COURSEACTIVITYSTATUS(r).done(function(o){var s=Object.assign({},l);s.series=[{name:M.util.get_string("courseactivitystatus-submissions","local_edwiserreports"),data:o.submissions},{name:M.util.get_string("courseactivitystatus-completions","local_edwiserreports"),data:o.completions}],s.xaxis.categories=o.labels,s.chart.toolbar.show=o.labels.length>30,s.chart.zoom.enabled=o.labels.length>30,s.tooltip.y.title.formatter=null,a.insight(i.INSIGHT,o.insight),function(e,o){null!==n&&n.destroy(),(n=new t(e.get(0),o)).render(),setTimeout(function(){a.loader.hide(i.PANEL)},1e3)}(e(i.PANEL).find(i.GRAPH),s)}).fail(function(e){a.loader.hide(i.PANEL)})}return{init:function(t){e(i.PANEL).length&&(c(),a.dateChange(function(e){r.date=e,c()}),e("body").on("change","".concat(i.PANEL," ").concat(i.STUDENT),function(){r.student=parseInt(e(this).val()),c()}),e("body").on("change","".concat(i.PANEL," ").concat(i.COURSE),function(){r.course=parseInt(e(this).val()),c()}),e(i.PANEL).find(".singleselect").select2())}}});
//# sourceMappingURL=block_courseactivitystatus.min.js.map
