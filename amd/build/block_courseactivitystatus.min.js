"use strict";
define(["jquery", "./chart/apexcharts", "./common", "./defaultconfig"], function(e, t, a, o) { var s = { PANEL: "#courseactivitystatusblock", INSIGHT: "#courseactivitystatusblock .insight", FORMFILTER: '.download-links [name="filter"]', GRAPH: "#apex-chart-courseactivitystatus-block", STUDENT: "#courseactivitystatus-student-select", COURSE: "#courseactivitystatus-course-select" },
        i = { GET_COURSEACTIVITYSTATUS: function(t) { return e.ajax({ url: o.requestUrl, type: o.requestType, dataType: o.requestDataType, data: { action: "get_courseactivitystatus_graph_data_ajax", secret: M.local_edwiserreports.secret, data: JSON.stringify({ filter: t }) } }) } },
        r = { date: "weekly", course: 0, student: 0 },
        n = null,
        l = { series: [], chart: { type: "area", height: 350, dropShadow: { enabled: !0, color: "#000", top: 18, left: 7, blur: 10, opacity: .2 }, toolbar: { show: !1, tools: { download: !1, reset: '<i class="fa fa-refresh"></i>' } }, zoom: { enabled: !1 } }, tooltip: { enabled: !0, enabledOnSeries: void 0, shared: !0, followCursor: !1, intersect: !1, inverseOrder: !1, fillSeriesColor: !1, onDatasetHover: { highlightDataSeries: !1 }, y: { formatter: void 0, title: {} }, items: { display: "flex" }, fixed: { enabled: !1, position: "topRight", offsetX: 0, offsetY: 0 } }, stroke: { curve: "smooth" }, grid: { borderColor: "#e7e7e7" }, markers: { size: 1 }, xaxis: { categories: null, type: "datetime", labels: { hideOverlappingLabels: !0, datetimeFormatter: { year: "yyyy", month: "MMM 'yy", day: "dd MMM", hour: "" } }, tooltip: { enabled: !1 } }, legend: { position: "top", floating: !0 }, dataLabels: { enabled: !1 }, colors: o.getColorTheme(), noData: { text: M.util.get_string("nographdata", "local_edwiserreports") } };

    function c(o) { a.loader.show(s.PANEL); var c = Object.keys(r).map(function(e) { return r[e] }).join("-");
        e(s.PANEL).find(s.FORMFILTER).val(c), i.GET_COURSEACTIVITYSTATUS(r).done(function(o) { var i = Object.assign({}, l);
            i.series = [{ name: M.util.get_string("courseactivitystatus-submissions", "local_edwiserreports"), data: o.submissions }, { name: M.util.get_string("courseactivitystatus-completions", "local_edwiserreports"), data: o.completions }], i.xaxis.categories = o.labels, i.chart.toolbar.show = o.labels.length > 30, i.chart.zoom.enabled = o.labels.length > 30, i.tooltip.y.title.formatter = null, a.insight(s.INSIGHT, o.insight),
                function(e, o) { null !== n && n.destroy(), (n = new t(e.get(0), o)).render(), setTimeout(function() { a.loader.hide(s.PANEL) }, 1e3) }(e(s.PANEL).find(s.GRAPH), i) }).fail(function(e) { a.loader.hide(s.PANEL) }) } return { init: function(t) { e(s.PANEL).length && (c(), a.dateChange(function(e) { r.date = e, c() }), e("body").on("change", "".concat(s.PANEL, " ").concat(s.STUDENT), function() { r.student = parseInt(e(this).val()), c() }), e("body").on("change", "".concat(s.PANEL, " ").concat(s.COURSE), function() { r.course = parseInt(e(this).val()), c() }), e(s.PANEL).find(".singleselect").select2()) } } });
//# sourceMappingURL=block_courseactivitystatus.min.js.map