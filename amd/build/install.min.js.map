{"version":3,"sources":["install.js"],"names":["define","$","ajax","init","call","methodname","args","pluginname","configname","done","response","success","console","log","document","ready","on","event","preventDefault","submit","positionSelector","currentVal","each","idx","val","push","_this","this","posChangedIdx","name","prevSelectVal","parseInt","currSelectVal","currVal"],"mappings":"AAAA,aA0BAA,OAAO,CAAC,SAAU,aAAc,SAAUC,EAAGC,GAyE3C,MAAO,CACLC,KAzES,WAEaD,EAAKE,KAAK,CAAC,CAC/BC,WAFc,yCAGdC,KAAM,CACJC,WAAY,uBACZC,WAAY,iCAGA,GAAGC,KAAK,SAAUC,GAC5BA,EAASC,SAEsBT,EAAKE,KAAK,CAAC,CAC1CC,WAFyB,4DAGzBC,KAAM,MAEmB,GAAGG,KAAK,SAAUC,GAC3CE,QAAQC,IAAIH,OAIlBT,EAAEa,UAAUC,MAAM,WAChBd,EAAE,4EAA4Ee,GAAG,QAAS,SAAUC,GAClGA,EAAMC,iBAEgBhB,EAAKE,KAAK,CAAC,CAC/BC,WAFc,yCAGdC,KAAM,CACJC,WAAY,uBACZC,WAAY,iCAGA,GAAGC,KAAK,WACtBR,EAAE,kBAAkBkB,eAI1B,IAAIC,EAAmB,wDACnBC,EAAa,GACjBpB,EAAEmB,GAAkBE,KAAK,SAAUC,EAAKC,GACtCH,EAAWI,KAAKxB,EAAEuB,GAAKA,SAEzBvB,EAAEmB,GAAkBJ,GAAG,SAAU,WAC/B,IAAIU,EAAQC,KAERC,GAAgB,EACpB3B,EAAEmB,GAAkBE,KAAK,SAAUC,EAAKC,GAClCE,EAAMG,MAAQL,EAAIK,OACpBD,EAAgBL,KAIpB,IAAIO,EAAgBC,SAASV,EAAWO,IACpCI,EAAgBD,SAAS9B,EAAE0B,MAAMH,OACrCvB,EAAEmB,GAAkBE,KAAK,SAAUC,EAAKC,GACtC,IAAIS,EAAUF,SAAS9B,EAAEuB,GAAKA,OAE1BE,EAAMG,OAASL,EAAIK,OACjBC,EAAgBE,GAAiBF,EAAgBG,GAAWD,GAAiBC,EAC/EhC,EAAEuB,GAAKA,IAAIO,SAASE,GAAW,GACtBH,EAAgBE,GAAiBF,EAAgBG,GAAWD,GAAiBC,GACtFhC,EAAEuB,GAAKA,IAAIO,SAASE,GAAW,MAIrCZ,EAAa,GACbpB,EAAEmB,GAAkBE,KAAK,SAAUC,EAAKC,GACtCH,EAAWI,KAAKxB,EAAEuB,GAAKA","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n/**\n * Plugin administration pages are defined here.\n *\n * @package     local_edwiserreports\n * @copyright   2021 wisdmlabs <support@wisdmlabs.com>\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n/* eslint-disable no-console */\ndefine(['jquery', 'core/ajax'], function($, ajax) {\n    var init = function() {\n        var getConfig = 'local_edwiserreports_get_plugin_config';\n        var getPluginConfig = ajax.call([\n            {\n                methodname: getConfig,\n                args: {\n                    pluginname: 'local_edwiserreports',\n                    configname: 'edwiserreportsinstallation'\n                }\n            }\n        ]);\n\n        getPluginConfig[0].done(function(response) {\n            if (response.success) {\n                var completeInstallation = 'local_edwiserreports_complete_edwiserreports_installation';\n                var completePluginInstallation = ajax.call([\n                    {\n                        methodname: completeInstallation,\n                        args: {}\n                    }\n                ]);\n\n                completePluginInstallation[0].done(function(response) {\n                    console.log(response);\n                });\n            }\n        });\n\n        $(document).ready(function() {\n            $('#page-admin-setting-manageedwiserreportss #adminsettings [type=\"submit\"]').on('click', function(event) {\n                event.preventDefault();\n                var setConfig = 'local_edwiserreports_set_plugin_config';\n                var setPluginConfig = ajax.call([\n                    {\n                        methodname: setConfig,\n                        args: {\n                            pluginname: 'local_edwiserreports',\n                            configname: 'edwiserreportsinstallation'\n                        }\n                    }\n                ]);\n\n                setPluginConfig[0].done(function() {\n                    $('#adminsettings').submit();\n                });\n            });\n        });\n\n        var positionSelector = 'select[id ^=id_s_local_edwiserreports][id $=position]';\n\n        var currentVal = [];\n        $(positionSelector).each(function(idx, val) {\n            currentVal.push($(val).val());\n        });\n\n        $(positionSelector).on('change', function() {\n            var _this = this;\n            var posChangedIdx = false;\n            $(positionSelector).each(function(idx, val) {\n                if (_this.name == val.name) {\n                    posChangedIdx = idx;\n                    return;\n                }\n            });\n\n            var prevSelectVal = parseInt(currentVal[posChangedIdx]);\n            var currSelectVal = parseInt($(this).val());\n\n            $(positionSelector).each(function(idx, val) {\n                var currVal = parseInt($(val).val());\n                if (_this.name !== val.name) {\n                    if (prevSelectVal > currSelectVal && prevSelectVal > currVal && currSelectVal <= currVal) {\n                        $(val).val(parseInt(currVal) + 1);\n                    } else if (prevSelectVal < currSelectVal && prevSelectVal < currVal && currSelectVal >= currVal) {\n                        $(val).val(parseInt(currVal) - 1);\n                    }\n                }\n            });\n\n            currentVal = [];\n            $(positionSelector).each(function(idx, val) {\n                currentVal.push($(val).val());\n            });\n        });\n    };\n\n    return {\n        init: init\n    };\n});\n"],"file":"install.min.js"}