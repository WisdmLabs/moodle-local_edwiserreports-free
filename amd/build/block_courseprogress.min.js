"use strict";define(["jquery","local_edwiserreports/chart/apexcharts","local_edwiserreports/defaultconfig","local_edwiserreports/variables","./common","local_edwiserreports/select2"],function(e,r,o,t,s){return{init:function(t){var a=null,n=o.getPanel("#courseprogressblock"),l=o.getPanel("#courseprogressblock","body"),i=l+" #wdm-courseprogress-select",c=l+" .ct-chart",d=l+" .loader",g={data:[0,0,0,0,0,0],labels:["0% - 20%","21% - 40%","41% - 60%","61% - 80%","81% - 100%"]},u=e(n+" form.download-links");function p(){var n=e(i).val();u.find('input[name="filter"]').val(n),a&&a.destroy(),s.loader.show("#courseprogressblock"),e.ajax({url:o.requestUrl,type:o.requestType,dataType:o.requestDataType,data:{action:"get_courseprogress_graph_data_ajax",secret:M.local_edwiserreports.secret,data:JSON.stringify({courseid:n})}}).done(function(e){!0!==e.error||"invalidsecretkey"!==e.exception.errorcode?(g.data=e.data,g.average=0==e.average?0:e.average.toPrecision(2),g.tooltipStrings=e.tooltip,s.insight("#courseprogressblock .insight",e.insight)):t("courseprogressblock",e)}).fail(function(e){g.average="0"}).always(function(){a=function(){var t={series:g.data.reverse(),chart:{type:"donut",height:350},colors:o.getColorTheme(),fill:{type:"solid"},labels:g.labels.reverse(),dataLabels:{enabled:!1},tooltip:{custom:function(e){var r=e.series,o=e.seriesIndex,t=(e.dataPointIndex,e.w),s=r[o],a=s<2?g.tooltipStrings.single:g.tooltipStrings.plural,n=t.config.labels[o],l=t.config.colors[o];return'<div class="custom-donut-tooltip" style="color: '.concat(l,';">\n                                <span style="font-weight: 500;"> ').concat(n,':</span>\n                                <span style="font-weight: 700;"> ').concat(s," ").concat(a,"</span>\n                            </div>")}},legend:{position:"right",formatter:function(e,r){return[e," - ",r.w.globals.series[r.seriesIndex]]}}},s=new r(e("#apex-chart-course-progress").get(0),t);return s.render(),s}(),e(d).hide(),e(c).fadeIn("slow"),s.loader.hide("#courseprogressblock")})}0!=e(i).length&&(p(),e(l+" .singleselect").select2(),e(i).on("change",function(){e(c).hide(),e(d).show(),p()}))}}});
//# sourceMappingURL=block_courseprogress.min.js.map
