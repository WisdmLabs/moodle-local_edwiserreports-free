{"version":3,"sources":["f2fsessions.js"],"names":["define","$","ModalFactory","ModalEvents","Fragment","Templates","V","init","CONTEXTID","PageId","F2fTable","loader","sesskey","data","cohortId","getF2fSessions","ajax","url","requestUrl","type","requestType","dataType","requestDataType","action","JSON","stringify","cohortid","done","response","context","render","then","html","js","replaceNode","fail","ex","console","log","always","show","hide","error","document","ready","cohortFilterBtn","on","this","changeExportUrl","exportUrlLink","cohortReplaceFlag","text"],"mappings":"AAAA,aA0BAA,OAAO,CAAC,SAAU,qBAAsB,oBAAqB,gBAAiB,iBAAkB,iCAAkC,+BAAgC,SAAUC,EAAGC,EAAcC,EAAaC,EAAUC,EAAWC,GAmE7N,MAAO,CACLC,KA7DF,SAAcC,GAEZ,IAAIC,EAAS,8BACTC,EAAWD,EAAS,UACpBE,EAASF,EAAS,WAClBG,EAAUX,EAAEQ,GAAQI,KAAK,WAEzBC,EAAW,EAQf,SAASC,EAAeD,GACtBb,EAAEe,KAAK,CACLC,IAAKX,EAAEY,WACPC,KAAMb,EAAEc,YACRC,SAAUf,EAAEgB,gBACZT,KAAM,CACJU,OAAQ,2BACRX,QAASA,EACTC,KAAMW,KAAKC,UAAU,CACnBC,SAAUZ,OAGba,KAAK,SAAUC,GAChB,IAAIC,EAAUD,EAASf,KACvBgB,EAAQjB,QAAUA,EAElBP,EAAUyB,OAAO,mCAAoCD,GAASE,KAAK,SAAUC,EAAMC,GACjF5B,EAAU6B,YAAYzB,EAAQuB,EAAMC,KAEnCE,KAAK,SAAUC,GAChBC,QAAQC,IAAIF,KACXG,OAAO,WACRtC,EAAES,GAAU8B,OACZvC,EAAEU,GAAQ8B,WAEXN,KAAK,SAAUO,GAChBL,QAAQC,IAAII,KAIhBzC,EAAE0C,UAAUC,MAAM,WAChB7B,EAAeD,GAGfb,EAxCqB4C,iDAwCDC,GAAG,QAAS,WAC9B7C,EAAES,GAAU+B,OACZxC,EAAEU,GAAQ6B,OACV1B,EAAWb,EAAE8C,MAAMlC,KAAK,YACxBP,EAAE0C,gBAAgBlC,EAAUR,EAAE2C,cAAe3C,EAAE4C,mBAC/CjD,EA9CkB,iBA8CC+B,KAAK/B,EAAE8C,MAAMI,QAChCpC,EAAeD","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n/**\n * Plugin administration pages are defined here.\n *\n * @package     local_edwiserreports\n * @copyright   2021 wisdmlabs <support@wisdmlabs.com>\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n/* eslint-disable no-console */\ndefine([\n    'jquery',\n    'core/modal_factory',\n    'core/modal_events',\n    'core/fragment',\n    'core/templates',\n    'local_edwiserreports/variables',\n    'local_edwiserreports/common'\n], function(\n    $,\n    ModalFactory,\n    ModalEvents,\n    Fragment,\n    Templates,\n    V\n) {\n    /* eslint-disable no-unused-vars */\n    /**\n     * Initialize\n     * @param {integer} CONTEXTID Current page context id\n     */\n    function init(CONTEXTID) {\n    /* eslint-enable no-unused-vars */\n        var PageId = \"#wdm-f2fsessions-individual\";\n        var F2fTable = PageId + \" .table\";\n        var loader = PageId + \" .loader\";\n        var sesskey = $(PageId).data(\"sesskey\");\n\n        // Varibales for cohort filter\n        var cohortId = 0;\n        var cohortFilterBtn = \"#cohortfilter\";\n        var cohortFilterItem = cohortFilterBtn + \" ~ .dropdown-menu .dropdown-item\";\n\n        /**\n         * Get face 2 faqce sessions\n         * @param {Number} cohortId Cohort id\n         */\n        function getF2fSessions(cohortId) {\n            $.ajax({\n                url: V.requestUrl,\n                type: V.requestType,\n                dataType: V.requestDataType,\n                data: {\n                    action: 'get_f2fsession_data_ajax',\n                    sesskey: sesskey,\n                    data: JSON.stringify({\n                        cohortid: cohortId\n                    })\n                },\n            })\n                .done(function(response) {\n                    var context = response.data;\n                    context.sesskey = sesskey;\n\n                    // eslint-disable-next-line promise/catch-or-return\n                    Templates.render('local_edwiserreports/f2fsessions', context)\n                    .then(function(html, js) {\n                        Templates.replaceNode(PageId, html, js);\n                        return;\n                    }).fail(function(ex) {\n                        console.log(ex);\n                    }).always(function() {\n                        $(F2fTable).show();\n                        $(loader).hide();\n                    });\n                })\n                .fail(function(error) {\n                    console.log(error);\n                });\n        }\n\n        $(document).ready(function() {\n            getF2fSessions(cohortId);\n\n            /* Select cohort filter for active users block */\n            $(cohortFilterItem).on('click', function() {\n                $(F2fTable).hide();\n                $(loader).show();\n\n                cohortId = $(this).data('cohortid');\n                V.changeExportUrl(cohortId, V.exportUrlLink, V.cohortReplaceFlag);\n                $(cohortFilterBtn).html($(this).text());\n                getF2fSessions(cohortId);\n            });\n        });\n    }\n\n    return {\n        init: init\n    };\n\n});\n"],"file":"f2fsessions.min.js"}