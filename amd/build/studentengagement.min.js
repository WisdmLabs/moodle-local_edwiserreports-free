"use strict";define(["jquery","./common","./defaultconfig","./select2"],function(e,t,a){var n={PAGE:"#studentengagement",TABLE:"#studentengagement table",COURSE:"#studentengagement .course-select",FORMFILTER:'#studentengagement .download-links [name="filter"]',COHORT:"#studentengagement .cohort-select"},l=null,o={GET_DATA:function(t){return e.ajax({url:a.requestUrl,type:a.requestType,dataType:a.requestDataType,data:{action:"get_studentengagement_table_data_ajax",secret:M.local_edwiserreports.secret,data:JSON.stringify({filter:t})}})}};function s(){l=e(n.TABLE).DataTable({paging:!0,processing:!0,serverSide:!0,rowId:"DT_RowId",deferRendering:!0,scrollY:"400px",scrollX:!0,scrollCollapse:!0,autoWidth:!0,ordering:!1,columns:[{data:"student"},{data:"timespentonlms"},{data:"timespentoncourse"},{data:"assignmentsubmitted"},{data:"activitiescompleted"},{data:"visitsoncourse"}],dom:'<"edwiserreports-table"<"table-filter d-flex"fl>i<t><"table-pagination"p>>',language:{searchPlaceholder:M.util.get_string("searchuser","local_edwiserreports"),emptyTable:M.util.get_string("emptytable","local_edwiserreports")},drawCallback:function(){t.stylePaginationButton(this)},rowCallback:function(a,n){e("td:eq(1)",a).html(0==n.timespentonlms?"-":t.timeFormatter(n.timespentonlms)),e("td:eq(2)",a).html(0==n.timespentoncourse?"-":t.timeFormatter(n.timespentoncourse))},ajax:function(a,l,s){t.loader.show(n.PAGE),o.GET_DATA({cohort:e(n.COHORT).val(),course:e(n.COURSE).val(),search:a.search.value,start:a.start,length:a.length}).done(function(e){t.loader.hide(n.PAGE),l(e)}).fail(function(e){t.loader.hide(n.PAGE)})}})}return{init:function(){e(document).ready(function(){e(n.PAGE).find(".singleselect").select2(),e("".concat(n.COURSE,", ").concat(n.COHORT)).on("change",function(){e(n.FORMFILTER).val([e(n.COHORT).val(),e(n.COURSE).val()].join("-")),null!==l?l.ajax.reload():s()}),s()})}}});
//# sourceMappingURL=studentengagement.min.js.map
