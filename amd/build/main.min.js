"use strict";define(["jquery","./common","./insights","./defaultconfig","./block_siteaccess","./block_activecourses","./block_activeusers","./block_courseprogress","./block_courseengagement","./block_inactiveusers","./block_realtimeusers","./block_todaysactivity","./block_grade","./block_visitsonsite","./block_timespentonsite","./block_timespentoncourse","./block_courseactivitystatus","./block_learnercourseprogress","./block_learnertimespentonsite"],function(e,t,a,n,o,c,r,i,l,s,d,E,u,T,p,m,D,v,f){var A={GET_TIMEPERIOD_LABEL:function(t){return e.ajax({url:n.requestUrl,type:n.requestType,dataType:n.requestDataType,data:{action:"get_timeperiod_label_data_ajax",secret:M.local_edwiserreports.secret,lang:e("html").attr("lang"),data:t}})}},I={ROOT:"#wdm-edwiserreports",DATESELECTED:".selected-period",DATE:".edwiserreports-calendar",DATEMENU:".edwiserreports-calendar + .dropdown-menu",DATEITEM:".edwiserreports-calendar + .dropdown-menu .dropdown-item",DATEPICKER:".edwiserreports-calendar + .dropdown-menu .dropdown-calendar",DATEPICKERINPUT:".edwiserreports-calendar + .dropdown-menu .flatpickr"},_=[o,c,r,i,l,s,d,E,u,T,p,m,D,v,f],g=null;function h(t,a){e("#".concat(t," .panel-body")).html(a.exception.message)}function w(t){A.GET_TIMEPERIOD_LABEL(t).done(function(t){var a=new Date(864e5*t.startdate),n=new Date(864e5*t.enddate),o=a.getDate();o=o<10?"0"+o:o;var c=n.getDate();c=c<10?"0"+c:c,e(I.DATESELECTED).html("\n            ".concat(o," ").concat(a.toLocaleString("default",{month:"long"})," ").concat(a.getFullYear()," -\n            ").concat(c," ").concat(n.toLocaleString("default",{month:"long"})," ").concat(n.getFullYear()))}).fail(function(e){Notification.exception(e)})}function b(e,t){var a=new CustomEvent("edwiserreport:datechange",{detail:{date:e}});document.dispatchEvent(a),w(e)}return{init:function(){e(document).ready(function(){a.init(),w(e(I.DATEITEM+".active").data("value"),e(I.DATEITEM+".active").text()),t.handleSearchInput(),e(".singleselect").each(function(t,a){e(a).val(e(a).find("option:nth-child(1)").val())}),_.forEach(function(e){e.init(h)}),g=e(I.DATEPICKERINPUT).flatpickr({mode:"range",altInput:!0,altFormat:"d M Y",dateFormat:"Y-m-d",maxDate:"today",appendTo:e(I.DATEPICKER).get(0),onOpen:function(){e(I.DATEMENU).addClass("withcalendar"),e(I.DATE).dropdown("update")},onClose:function(){var t,a;e(I.DATEMENU).removeClass("withcalendar"),t=e(I.DATEPICKERINPUT).val(),a=e(I.DATEPICKERINPUT).next().val().replace("to","-"),e(I.DATEPICKERINPUT).next().val(a),t.includes(" to ")?(e(I.DATEITEM).removeClass("active"),e(I.DATEITEM+".custom").addClass("active"),e(I.DATE).html(a),b(t)):g.clear()}}),e("body").on("click",I.DATEITEM+":not(.custom)",function(){e(I.DATEITEM).removeClass("active"),e(this).addClass("active"),e(I.DATE).html(e(this).text()),g.clear(),b(e(this).data("value"),e(this).text())})})}}});
//# sourceMappingURL=main.min.js.map
