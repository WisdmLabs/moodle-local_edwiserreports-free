"use strict";define(["jquery","./common","./defaultconfig","./select2"],function(e,a,t){var r={PAGE:"#grade",TABLE:"#grade table",COURSE:"#grade .course-select",FORMFILTER:'#grade .download-links [name="filter"]',COHORT:"#grade .cohort-select"},l=null,n={GET_DATA:function(a){return e.ajax({url:t.requestUrl,type:t.requestType,dataType:t.requestDataType,data:{action:"get_grade_table_data_ajax",secret:M.local_edwiserreports.secret,data:JSON.stringify({filter:a})}})}};function o(){l=e(r.TABLE).DataTable({paging:!0,processing:!0,serverSide:!0,rowId:"DT_RowId",deferRendering:!0,scrollY:"400px",scrollX:!0,scrollCollapse:!0,autoWidth:!0,columns:[{data:"student"},{data:"course"},{data:"activity",sortable:!1},{data:"grade"}],dom:'<"edwiserreports-table"<"table-filter d-flex"fl>i<t><"table-pagination"p>>',language:{searchPlaceholder:M.util.get_string("searchuser","local_edwiserreports"),emptyTable:M.util.get_string("emptytable","local_edwiserreports")},drawCallback:function(){a.stylePaginationButton(this)},ajax:function(t,l,o){a.loader.show(r.PAGE),e(r.FORMFILTER).val([e(r.COURSE).val(),e(r.COHORT).val(),t.search.value,t.order[0].column,t.order[0].dir].join("-")),n.GET_DATA({cohort:e(r.COHORT).val(),course:e(r.COURSE).val(),search:t.search.value,start:t.start,length:t.length,ordering:t.order[0]}).done(function(e){a.loader.hide(r.PAGE),l(e)}).fail(function(e){a.loader.hide(r.PAGE)})}})}return{init:function(){e(document).ready(function(){e(r.PAGE).find(".singleselect").select2(),e(r.COURSE).on("change",function(){null!==l?l.ajax.reload():o()}),e(r.COHORT).on("change",function(){null!==l?l.ajax.reload():o()}),o()})}}});
//# sourceMappingURL=grade.min.js.map
