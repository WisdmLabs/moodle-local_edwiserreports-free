"use strict";define(["jquery","core/notification","./common","./defaultconfig","./select2"],function(e,t,a,r){var n={PAGE:"#grade",TABLE:"#grade table",COURSE:"#grade .course-select",FORMFILTER:'#grade .download-links [name="filter"]',COHORT:"#grade .cohort-select",SEARCHTABLE:"#grade .table-search-input input",LENGTH:"#grade .table-length-input select"},o=null,l={GET_DATA:function(t){return e.ajax({url:r.requestUrl,type:r.requestType,dataType:r.requestDataType,data:{action:"get_grade_table_data_ajax",secret:M.local_edwiserreports.secret,lang:e("html").attr("lang"),data:JSON.stringify({filter:t})}})}};function i(){o=e(n.TABLE).DataTable({paging:!0,processing:!0,serverSide:!0,rowId:"DT_RowId",deferRendering:!0,scrollX:!0,scrollCollapse:!0,autoWidth:!0,columns:[{data:"student"},{data:"course"},{data:"activity",sortable:!1},{data:"grade"}],dom:'<"edwiserreports-table"i<t><"table-pagination"p>>',language:{info:M.util.get_string("tableinfo","local_edwiserreports"),infoEmpty:M.util.get_string("infoempty","local_edwiserreports"),emptyTable:M.util.get_string("emptytable","local_edwiserreports"),zeroRecords:M.util.get_string("zerorecords","local_edwiserreports"),paginate:{previous:M.util.get_string("previous","moodle"),next:M.util.get_string("next","moodle")}},drawCallback:function(){a.stylePaginationButton(this)},ajax:function(r,o,i){a.loader.show(n.PAGE),e(n.FORMFILTER).val([e(n.COURSE).val(),e(n.COHORT).val(),r.search.value,r.order[0].column,r.order[0].dir].join("-")),l.GET_DATA({cohort:e(n.COHORT).val(),course:e(n.COURSE).val(),search:r.search.value,start:r.start,length:r.length,ordering:r.order[0]}).done(function(e){a.loader.hide(n.PAGE),o(e)}).fail(function(e){t.exception(e),a.loader.hide(n.PAGE)})}})}return{init:function(){e(document).ready(function(){e(n.PAGE).find(".singleselect").select2(),e(n.COURSE).on("change",function(){null!==o?o.ajax.reload():i()}),e(n.COHORT).on("change",function(){null!==o?o.ajax.reload():i()}),e("body").on("input",n.SEARCHTABLE,function(){o.search(this.value).draw()}),e(n.LENGTH).on("change",function(){null!==o?(o.page.len(this.value),o.ajax.reload()):i()}),i(),a.handleSearchInput()})}}});
//# sourceMappingURL=grade.min.js.map
