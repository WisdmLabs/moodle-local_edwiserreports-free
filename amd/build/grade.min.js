"use strict";define(["jquery","./common","./defaultconfig","./select2"],function(e,a,t){var r={PAGE:"#grade",TABLE:"#grade table",COURSE:"#grade .course-select",FORMFILTER:'#grade .download-links [name="filter"]',COHORT:"#grade .cohort-select",SEARCHTABLE:"#grade .table-search-input input",LENGTH:"#grade .table-length-input select"},n=null,l={GET_DATA:function(a){return e.ajax({url:t.requestUrl,type:t.requestType,dataType:t.requestDataType,data:{action:"get_grade_table_data_ajax",secret:M.local_edwiserreports.secret,data:JSON.stringify({filter:a})}})}};function o(){n=e(r.TABLE).DataTable({paging:!0,processing:!0,serverSide:!0,rowId:"DT_RowId",deferRendering:!0,scrollX:!0,scrollCollapse:!0,autoWidth:!0,columns:[{data:"student"},{data:"course"},{data:"activity",sortable:!1},{data:"grade"}],dom:'<"edwiserreports-table"i<t><"table-pagination"p>>',language:{searchPlaceholder:M.util.get_string("searchuser","local_edwiserreports"),emptyTable:M.util.get_string("emptytable","local_edwiserreports")},drawCallback:function(){a.stylePaginationButton(this)},ajax:function(t,n,o){a.loader.show(r.PAGE),e(r.FORMFILTER).val([e(r.COURSE).val(),e(r.COHORT).val(),t.search.value,t.order[0].column,t.order[0].dir].join("-")),l.GET_DATA({cohort:e(r.COHORT).val(),course:e(r.COURSE).val(),search:t.search.value,start:t.start,length:t.length,ordering:t.order[0]}).done(function(e){a.loader.hide(r.PAGE),n(e)}).fail(function(e){a.loader.hide(r.PAGE)})}})}return{init:function(){e(document).ready(function(){e(r.PAGE).find(".singleselect").select2(),e(r.COURSE).on("change",function(){null!==n?n.ajax.reload():o()}),e(r.COHORT).on("change",function(){null!==n?n.ajax.reload():o()}),e("body").on("input",r.SEARCHTABLE,function(){n.search(this.value).draw()}),e(r.LENGTH).on("change",function(){null!==n?(console.log(this.value),n.page.len(this.value),n.ajax.reload()):o()}),o(),a.handleSearchInput()})}}});
//# sourceMappingURL=grade.min.js.map
