"use strict";define(["jquery","core/templates","core/fragment","core/modal_factory","core/modal_events","core/str","local_edwiserreports/variables","local_edwiserreports/common"],function(e,o,t,r,n,l,i){return{init:function(a){var d="#wdm-lpstats-individual",c="#wdm-lp-select",s=d+" .table",p=d+" .loader",f=e("#wdm-userfilter .row .col-md-6:first-child"),u=e(d).find("#wdm-lp-dropdown"),m=null,h=e("#wdm-export-detail-lpsreports"),w=null,g="local_edwiserreports",v=l.get_strings([{key:"lpdetailedreport",component:g}]),y=0;function _(r,n){m&&(m.destroy(),e(s).hide(),e(p).show()),t.loadFragment("local_edwiserreports","lpstats",a,{lpid:r,cohortid:n}).done(function(t){var r=JSON.parse(t);o.render("local_edwiserreports/lpstatsinfo",r).then(function(e,t){o.replaceNode(s,e,t)}).fail(function(e){console.log(e)}).always(function(){e(s).show(),m=e(s).DataTable({dom:"<'pull-left'f><t><p>",oLanguage:{sEmptyTable:"No Users are enrolled in any Learning Programs"},responsive:!0}),e(p).hide()})})}e(document).ready(function(){f.html(u.html()),e(document).find(c).select2(),e(document).find(c).show(),u.remove();var t=e(document).find(c).val();_(t,y),e(i.cohortFilterItem).on("click",function(){y=e(this).data("cohortid"),e(i.cohortFilterBtn).html(e(this).text()),i.changeExportUrl(y,i.exportUrlLink,i.cohortReplaceFlag),_(t,y)}),e(document).find(c).on("change",function(){e(s).hide(),e(p).show(),t=e(document).find(c).val(),i.changeExportUrl(t,i.exportUrlLink,i.filterReplaceFlag),_(t,y)}),h.on("click",function(){var t;t=h,w?w.show():v.then(function(){r.create({title:M.util.get_string("lpdetailedreport",g)},t).done(function(t){var r=t.getRoot();w=t,r.on(n.cancel,function(){t.hide()}),t.setBody(o.render("local_edwiserreports/lpdetailedreport",{sesskey:e(d).data("sesskey"),formaction:M.cfg.wwwroot+"/local/edwiserreports/download.php"})),t.show()})})})})}}});
//# sourceMappingURL=lpstats.min.js.map
