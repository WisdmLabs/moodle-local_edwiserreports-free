"use strict";define(["jquery","core/modal_factory","core/modal_events","core/fragment","./variables","./common","./jquery.dataTables","./dataTables.bootstrap4","./select2"],function(e,a,t,o,r,s){return{init:function(l){var d="#wdm-courseprogress-individual",i=d+" .table",n=d+" .loader",c=i+" a.modal-trigger",u=null,p=0,m=e(d).data("sesskey"),g=r.requestUrl+"?action=get_courseprogress_graph_data_ajax&sesskey="+m;function h(a){s.loader.show("#page-local-edwiserreports-coursereport #wdm-courseprogress-individual"),e(i).show(),e(n).hide();var t=JSON.stringify({courseid:"all",cohortid:a});u=e(i).DataTable({ajax:g+"&cohortid="+a+"&data="+t,dom:'<"edwiserreports-table"<"table-filter d-flex"fl><"p-2"i><t><"table-pagination"p>>',columns:[{data:"coursename"},{data:"enrolments"},{data:"completed"},{data:"completed81to100"},{data:"completed61to80"},{data:"completed41to60"},{data:"completed21to40"},{data:"completed0to20"}],columnDefs:[{className:"text-left",targets:0},{className:"text-center modal-trigger",targets:"_all"}],language:{searchPlaceholder:"Search Course",emptyTable:"There are no courses"},drawCallback:function(){e(i).find("th").addClass("palette-3-bg text-white"),s.stylePaginationButton(this)},initComplete:function(){s.loader.hide("#page-local-edwiserreports-coursereport #wdm-courseprogress-individual")}})}e("#page-local-edwiserreports-coursereport").find(".singleselect").select2(),e(document).ready(function(){h(p),e(document).on("change","#page-local-edwiserreports-coursereport .cohort-select",function(){u&&(u.destroy(),e(i).hide(),e(n).show()),p=e(this).val(),e("#page-local-edwiserreports-coursereport").find('.download-links input[name="cohortid"]').val(p),h(p)}),e(document).on("click",c,function(){var r=e(this).data("minvalue"),d=e(this).data("maxvalue"),i=e(this).data("courseid"),n=e(this).data("coursename"),c=null;a.create({body:o.loadFragment("local_edwiserreports","userslist",l,{page:"courseprogress",courseid:i,minval:r,maxval:d,cohortid:p})}).then(function(e){(c=e.getRoot()).find(".modal-dialog").addClass("modal-lg"),e.setTitle(n),e.show(),c.on(t.hidden,function(){e.destroy()}),c.on(t.bodyRendered,function(){var e=c.find(".modal-table");e.find("tbody").hasClass("empty")&&e.find("tbody").empty(),e.DataTable({language:{searchPlaceholder:"Search User",emptyTable:"There are no users"},dom:'<"edwiserreports-table"<"table-filter d-flex"f><t><"table-pagination"p>>',drawCallback:function(){e.find("th").addClass("palette-3-bg text-white"),s.stylePaginationButton(this)},lengthChange:!1,bInfo:!1})})})})})}}});
//# sourceMappingURL=courseprogress.min.js.map
