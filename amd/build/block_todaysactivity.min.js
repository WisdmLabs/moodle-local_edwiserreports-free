"use strict";define(["jquery","core/notification","./chart/apexcharts","./defaultconfig","./common","local_edwiserreports/jquery","./flatpickr"],function(t,a,o,e,i,r){var c="rtl"==t("html").attr("dir")?1:0;return{init:function(d){var s,l=e.getPanel("#todaysactivityblock"),n=e.getPanel("#todaysactivityblock","body"),y=l+" #flatpickrCalender-todaysactivity";function u(r){i.loader.show("#todaysactivityblock"),t.ajax({url:e.requestUrl,type:e.requestType,dataType:e.requestDataType,data:{action:"get_todaysactivity_data_ajax",secret:M.local_edwiserreports.secret,lang:t("html").attr("lang"),data:JSON.stringify({date:r})}}).done(function(a){!0!==a.error||"invalidsecretkey"!==a.exception.errorcode?(t.each(a.data,function(a,o){t(n+" #todays-"+a).find(".data").html(o)}),function(a){e.todaysActivityBlock.graph.data=a,a={labels:e.todaysActivityBlock.graph.labels,datasets:[{label:e.todaysActivityBlock.graph.labelName,data:e.todaysActivityBlock.graph.data,backgroundColor:e.todaysActivityBlock.graph.backgroundColor}]};var i={series:[{data:e.todaysActivityBlock.graph.data}],chart:{type:"bar",height:150,toolbar:{show:!1}},plotOptions:{bar:{borderRadius:4,horizontal:!1,colors:{ranges:[{from:0,to:100}]}}},grid:{show:!1},dataLabels:{enabled:!1},yaxis:{show:!1},tooltip:{theme:"dark",custom:function(t){let{series:a,seriesIndex:o,dataPointIndex:e,w:i}=t;return'<div class="text-center p-1">'+i.config.xaxis.categories[e]+"<br>"+a[o][e]+"</div>"}},xaxis:{categories:e.todaysActivityBlock.graph.labels},colors:[e.getColorTheme()[2]]};s&&s.destroy(),(s=new o(t("#apex-chart-todays-activity").get(0),i)).render()}(a.data.visitshour)):d("todaysactivityblock",a)}).fail(function(t){a.exception(t)}).always(function(){i.loader.hide("#todaysactivityblock")})}t(document).ready(function(){e.todaysActivityBlock=e.getTodaysActivityBlock(),e.todaysActivityBlock&&(u(),r(y).flatpickr({dateFormat:c?"Y M d":"d M Y",maxDate:"today",defaultDate:["today"],onChange:function(t,a,o){u(a)}}))})}}});
//# sourceMappingURL=block_todaysactivity.min.js.map
