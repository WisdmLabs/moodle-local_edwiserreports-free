"use strict";define(["jquery","core/notification","./chart/apexcharts","./defaultconfig","./common"],function(t,a,o,e,i){return{init:function(c){var r,d=e.getPanel("#todaysactivityblock"),s=e.getPanel("#todaysactivityblock","body"),n=d+" #flatpickrCalender-todaysactivity";function l(d){i.loader.show("#todaysactivityblock"),t.ajax({url:e.requestUrl,type:e.requestType,dataType:e.requestDataType,data:{action:"get_todaysactivity_data_ajax",secret:M.local_edwiserreports.secret,lang:t("html").attr("lang"),data:JSON.stringify({date:d})}}).done(function(a){!0!==a.error||"invalidsecretkey"!==a.exception.errorcode?(t.each(a.data,function(a,o){t(s+" #todays-"+a).find(".data").html(o)}),function(a){e.todaysActivityBlock.graph.data=a,a={labels:e.todaysActivityBlock.graph.labels,datasets:[{label:e.todaysActivityBlock.graph.labelName,data:e.todaysActivityBlock.graph.data,backgroundColor:e.todaysActivityBlock.graph.backgroundColor}]};var i={series:[{data:e.todaysActivityBlock.graph.data}],chart:{type:"bar",height:150,toolbar:{show:!1}},plotOptions:{bar:{borderRadius:4,horizontal:!1,colors:{ranges:[{from:0,to:100}]}}},grid:{show:!1},dataLabels:{enabled:!1},yaxis:{show:!1},tooltip:{theme:"dark",custom:function(t){var a=t.series,o=t.seriesIndex,e=t.dataPointIndex,i=t.w;return'<div class="text-center p-1">'+i.config.xaxis.categories[e]+"<br>"+a[o][e]+"</div>"}},xaxis:{categories:e.todaysActivityBlock.graph.labels},colors:[e.getColorTheme()[2]]};r&&r.destroy(),(r=new o(t("#apex-chart-todays-activity").get(0),i)).render()}(a.data.visitshour)):c("todaysactivityblock",a)}).fail(function(t){a.exception(t)}).always(function(){i.loader.hide("#todaysactivityblock")})}t(document).ready(function(){e.todaysActivityBlock=e.getTodaysActivityBlock(),e.todaysActivityBlock&&(l(),t(n).flatpickr({dateFormat:"d M Y",maxDate:"today",defaultDate:["today"],onChange:function(t,a,o){l(a)}}))})}}});
//# sourceMappingURL=block_todaysactivity.min.js.map
