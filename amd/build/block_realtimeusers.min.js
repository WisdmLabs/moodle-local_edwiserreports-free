"use strict";define(["jquery","core/notification","./defaultconfig","./common","./jquery.dataTables","./dataTables.bootstrap4"],function(e,t,a,o){var r=null,l=a.getPanel("#liveusersblock"),n=a.getPanel("#liveusersblock","body"),s=e(n+" .loader"),i=e(n+" .table"),c=l+" .table-search-input input";return{init:function n(u){e(l).length&&(o.loader.show("#liveusersblock"),e.ajax({url:a.requestUrl,type:a.requestType,dataType:a.requestDataType,data:{action:"get_liveusers_data_ajax",secret:M.local_edwiserreports.secret,lang:e("html").attr("lang")}}).done(function(t){var a;!0!==t.error||"invalidsecretkey"!==t.exception.errorcode?(setTimeout(function(){n(u)},12e4),a=t.data,r?r.destroy():(s.hide(),i.show()),r=i.DataTable({data:a,dom:'<"edwiserreports-table"<t><"table-pagination"p>>',language:{info:M.util.get_string("tableinfo","local_edwiserreports"),infoEmpty:M.util.get_string("infoempty","local_edwiserreports"),emptyTable:M.util.get_string("nousers","local_edwiserreports"),zeroRecords:M.util.get_string("zerorecords","local_edwiserreports"),paginate:{previous:M.util.get_string("previous","moodle"),next:M.util.get_string("next","moodle")}},aaSorting:[[1,"asc"]],columnDefs:[{targets:0,className:"text-left"},{targets:1,className:"text-center"},{targets:2,className:"text-center",orderable:!1}],drawCallback:function(){o.stylePaginationButton(this)},bInfo:!1,lengthChange:!1,initComplete:function(){if(null!=a){var t='<small class="ml-auto my-auto font-weight-bold">LoggedIn Users : '+a.length+"</small>";e(document).find(".rtblock-filter").append(t)}}})):u("liveusersblock",t)}).fail(function(e){t.exception(e)}).always(function(){o.loader.hide("#liveusersblock")}),e("body").on("input",c,function(){r.column(0).search(this.value).draw()}))}}});
//# sourceMappingURL=block_realtimeusers.min.js.map
