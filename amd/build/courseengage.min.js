"use strict";define(["jquery","core/modal_factory","core/modal_events","core/fragment","./variables","./common","./jquery.dataTables","./dataTables.bootstrap4"],function(e,a,t,o,n,i){return{init:function(d){var r="#wdm-courseengage-individual",s=r+" .table",l=r+" .loader",c=e(r).data("sesskey"),u=n.requestUrl+"?action=get_courseengage_data_ajax&sesskey="+c,g=s+" a.modal-trigger",h=null,m=null,p=0;function b(a){i.loader.show("#page-local-edwiserreports-coursereport #wdm-courseengage-individual"),e(s).show(),e(l).hide(),(h=e(s).DataTable({ajax:u+"&cohortid="+a,dom:'<"edwiserreports-table"<"p-2"i><t><"table-pagination"p>>',columns:[{data:"coursename"},{data:"enrolment"},{data:"visited"},{data:"activitystart"},{data:"completedhalf"},{data:"coursecompleted"}],columnDefs:[{className:"text-left",targets:0},{className:"text-center modal-trigger",targets:"_all"}],language:{searchPlaceholder:"Search Course",emptyTable:"There are no courses"},drawCallback:function(){e(s).find("th").addClass("theme-3-bg text-white"),i.stylePaginationButton(this)},initComplete:function(){i.loader.hide("#page-local-edwiserreports-coursereport #wdm-courseengage-individual")}})).page.len(e("#wdm-courseengage-individual .table-length-input select").val()).draw(),h.column(0).search(e("#wdm-courseengage-individual .table-search-input input").val()).draw()}e(document).ready(function(){e("body").on("change","#wdm-courseengage-individual .table-length-input select",function(){h.page.len(this.value).draw()}),e("body").on("input","#wdm-courseengage-individual .table-search-input input",function(){h.column(0).search(this.value).draw()}),e("body").on("input",".courseengage-modal .table-search-input input",function(){m.search(this.value).draw()}),b(p),e(document).on("change","#page-local-edwiserreports-coursereport .cohort-select",function(){h&&(h.destroy(),e(s).hide(),e(l).show()),b(p=e(this).val())}),e(document).on("click",g,function(){var n=e(this).data("action"),r=e(this).data("courseid"),s=e(this).data("coursename"),l=null;a.create({body:o.loadFragment("local_edwiserreports","userslist",d,{page:"courseengage",courseid:r,action:n,cohortid:p})}).then(function(a){l=a.getRoot(),a.getBody().addClass("courseengage-modal"),l.find(".modal-dialog").addClass("modal-lg"),a.setTitle(s),a.show(),l.on(t.hidden,function(){a.destroy()}),l.on(t.shown,function(){e(window).resize()}),l.on(t.bodyRendered,function(){var e=l.find(".modal-table");e.find("tbody").hasClass("empty")&&e.find("tbody").empty(),m=e.DataTable({language:{emptyTable:"There are no users"},dom:'<"edwiserreports-table"i<t><"table-pagination"p>>',drawCallback:function(){e.find("th").addClass("theme-3-bg text-white"),i.stylePaginationButton(this)},lengthChange:!1})})})})})}}});
//# sourceMappingURL=courseengage.min.js.map
