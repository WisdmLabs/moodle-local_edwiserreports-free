"use strict";define(["jquery","./variables","./common","./select2"],function(e,t,n){var a={PANEL:"#wdm-completion-individual",FORMFILTER:'.download-links [name="filter"]',FORMRTL:'.download-links [name="rtl"]',FILTERS:".filters"};let i="rtl"==e("html").attr("dir")?1:0;return{init:function(l){var r="#wdm-completion-individual",o=e(r).find(".table"),s=null,d=10,c=0;function u(a,i){n.loader.show(r);var l={action:"get_completion_data_ajax",sesskey:e(r).data("sesskey"),data:JSON.stringify({courseid:a,cohortid:i})};null!==s&&s.destroy(),s=o.DataTable({dom:'<"edwiserreports-table"<"table-filter d-flex"i><t><"table-pagination"p>>',ajax:t.generateUrl(t.requestUrl,l),pageLength:d,language:{info:M.util.get_string("tableinfo","local_edwiserreports"),infoEmpty:M.util.get_string("infoempty","local_edwiserreports"),emptyTable:M.util.get_string("nostudentsenrolled","local_edwiserreports"),zeroRecords:M.util.get_string("zerorecords","local_edwiserreports"),paginate:{previous:" ",next:" "}},columns:[{data:"username"},{data:"enrolledon",render:function(t){return"rtl"==e("html").attr("dir")?'<label style="direction:ltr;">'+t+"</label>":t},width:"10rem"},{data:"enrolltype"},{data:"noofvisits"},{data:"completion"},{data:"compleiontime",render:function(t){return"rtl"==e("html").attr("dir")?'<label style="direction:ltr;">'+t+"</label>":t},width:"10rem"},{data:"grade"},{data:"lastaccess",render:function(t){let a=n.formatDate(new Date(1e3*t),"d MMM yyyy hh:mm TT").substring(0,11)+"<br>"+n.formatDate(new Date(1e3*t),"d MMM yyyy hh:mm TT").substring(11,20);return("rtl"==e("html").attr("dir")?1:0)&&(a=n.formatDate(new Date(1e3*t),"TT mm:hh yyyy MMM d").substring(8,20)+"<br>"+n.formatDate(new Date(1e3*t),"TT mm:hh yyyy MMM d").substring(0,8)),`<p class="erp-time-rtl"><span class="d-none">${t}</span>`+(0==t?M.util.get_string("never","local_edwiserreports"):a)+"</p>"},width:"10rem"}],drawCallback:function(){n.stylePaginationButton(this)},columnDefs:[{className:"text-left",targets:[0,1]},{className:"text-right",targets:"_all"}],initComplete:function(){n.loader.hide(r)}})}e(document).ready(function(){n.handleSearchInput();var t=e(r).find('.download-links input[name="filter"]').val();e(a.PANEL).find(a.FORMRTL).val(i),u(t,c),e(r).find(".cohort-select").on("change",function(){c=e(this).val(),e(r).find('.download-links input[name="cohortid"]').val(c),u(t,c)}),e(r).find(".course-select").on("change",function(){window.location=M.cfg.wwwroot+"/local/edwiserreports/completion.php?courseid="+e(this).val()}),e(r).find(".singleselect").select2(),e("#wdm-completion-individual .table-length-input select").on("change",function(){s.page.len(this.value).draw(),d=this.value}),e("#wdm-completion-individual .table-search-input input").on("input",function(){s.column(0).search(this.value).draw()})})}}});
//# sourceMappingURL=completion.min.js.map
