"use strict";define(["jquery","local_edwiserreports/variables","local_edwiserreports/jquery.dataTables","local_edwiserreports/dataTables.bootstrap4","local_edwiserreports/common"],function(e,a){return{init:function(t){var s=e("#wdm-courseanalytics-individual"),r=s.find(".recent-visits .table"),n=s.find(".recent-enrolment .table"),o=s.find(".recent-completion .table"),l=e(".loader"),i=null,d=null,c=null,u=0;function f(t,l){var u=s.data("sesskey");e.ajax({url:a.requestUrl,type:a.requestType,dataType:a.requestDataType,data:{action:"get_courseanalytics_data_ajax",sesskey:u,data:JSON.stringify({courseid:t,cohortid:l})}}).done(function(e){i=p(r,i,e.data.recentvisits),d=p(n,d,e.data.recentenrolments),c=p(o,c,e.data.recentcompletions)}).fail(function(e){console.log(e)}).always(function(){e(window).resize(),s.fadeIn("slow")})}function p(a,t,n){var i="No users has Enrolled in this course";return a==o?i="No users has completed this course":a==r&&(i="No users has visited this course"),null!==t&&t.destroy(),l.hide(),a.fadeIn("slow"),s.fadeIn("slow"),t=a.DataTable({data:n,responsive:!0,oLanguage:{sEmptyTable:i,sSearchPlaceholder:"Search Analytics"},columnDefs:[{className:"text-left",targets:0},{className:"text-center",targets:"_all"}],drawCallback:function(){e(".dataTables_paginate > .pagination").addClass("pagination-sm pull-right"),e(".dataTables_filter").addClass("pagination-sm pull-right")},order:[[1,"desc"]],bInfo:!1,lengthChange:!1})}e(document).ready(function(){var t=a.getUrlParameter("courseid");e("#cohortfilter ~ .dropdown-menu .dropdown-item").on("click",function(){u=e(this).data("cohortid"),e("#cohortfilter").html(e(this).text()),f(t,u)}),f(t,u)})}}});
//# sourceMappingURL=courseanalytics.min.js.map
