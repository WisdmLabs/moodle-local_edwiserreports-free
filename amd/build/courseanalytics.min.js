"use strict";define(["jquery","local_edwiserreports/variables","local_edwiserreports/jquery.dataTables","local_edwiserreports/dataTables.bootstrap4","local_edwiserreports/common"],function(e,t){return{init:function(a){var r=e("#wdm-courseanalytics-individual"),o=r.find(".recent-visits .table"),s=r.find(".recent-enrolment .table"),i=r.find(".recent-completion .table"),n=e(".loader"),l=null,d=null,c=null,u=0;function g(a,n){var u=r.data("sesskey");e.ajax({url:t.requestUrl,type:t.requestType,dataType:t.requestDataType,data:{action:"get_courseanalytics_data_ajax",sesskey:u,data:JSON.stringify({courseid:a,cohortid:n})}}).done(function(e){l=p(o,l,e.data.recentvisits),d=p(s,d,e.data.recentenrolments),c=p(i,c,e.data.recentcompletions)}).fail(function(e){console.log(e)}).always(function(){e(window).resize(),r.fadeIn("slow")})}function p(t,a,s){var l=M.util.get_string("nousersincourse","local_edwiserreports");return t==i?l=M.util.get_string("nouserscompleted","local_edwiserreports"):t==o&&(l=M.util.get_string("nousersvisited","local_edwiserreports")),null!==a&&a.destroy(),n.hide(),t.fadeIn("slow"),r.fadeIn("slow"),a=t.DataTable({data:s,responsive:!0,language:{info:M.util.get_string("tableinfo","local_edwiserreports"),infoEmpty:M.util.get_string("infoempty","local_edwiserreports"),emptyTable:l,zeroRecords:M.util.get_string("zerorecords","local_edwiserreports"),paginate:{previous:M.util.get_string("previous","moodle"),next:M.util.get_string("next","moodle")}},columnDefs:[{className:"text-left",targets:0},{className:"text-center",targets:"_all"}],drawCallback:function(){e(".dataTables_paginate > .pagination").addClass("pagination-sm pull-right"),e(".dataTables_filter").addClass("pagination-sm pull-right")},order:[[1,"desc"]],bInfo:!1,lengthChange:!1})}e(document).ready(function(){var a=t.getUrlParameter("courseid");e("#cohortfilter ~ .dropdown-menu .dropdown-item").on("click",function(){u=e(this).data("cohortid"),e("#cohortfilter").html(e(this).text()),g(a,u)}),g(a,u)})}}});
//# sourceMappingURL=courseanalytics.min.js.map
