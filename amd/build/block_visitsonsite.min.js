"use strict";
define(["jquery", "./chart/apexcharts", "./common", "./defaultconfig"], function(e, t, o, i) { var r = { PANEL: "#visitsonsiteblock", INSIGHT: "#visitsonsiteblock .insight", GRAPH: "#apex-chart-visitsonsite-block" },
        s = { GET_VISITSONSITE: function() { return e.ajax({ url: i.requestUrl, type: i.requestType, dataType: i.requestDataType, data: { action: "get_visitsonsite_graph_data_ajax", secret: M.local_edwiserreports.secret } }) } },
        a = null,
        l = { series: [], chart: { type: "area", height: 350, dropShadow: { enabled: !0, color: "#000", top: 18, left: 7, blur: 10, opacity: .2 }, toolbar: { show: !1, tools: { download: !1, reset: '<i class="fa fa-refresh"></i>' } }, zoom: { enabled: !1 } }, tooltip: { enabled: !0, enabledOnSeries: void 0, shared: !0, followCursor: !1, intersect: !1, inverseOrder: !1, fillSeriesColor: !1, onDatasetHover: { highlightDataSeries: !1 }, y: { formatter: void 0, title: {} }, items: { display: "flex" }, fixed: { enabled: !1, position: "topRight", offsetX: 0, offsetY: 0 } }, stroke: { curve: "smooth" }, grid: { borderColor: "#e7e7e7" }, markers: { size: 1 }, xaxis: { categories: null, type: "datetime", labels: { hideOverlappingLabels: !0, datetimeFormatter: { year: "yyyy", month: "MMM 'yy", day: "dd MMM", hour: "" } }, tooltip: { enabled: !1 } }, legend: { position: "top", floating: !0 }, dataLabels: { enabled: !1 }, colors: [i.getColorTheme()[2]], noData: { text: M.util.get_string("nographdata", "local_edwiserreports") } };

    function n(i) { o.loader.show(r.PANEL), s.GET_VISITSONSITE().done(function(s) { if (!0 !== s.error || "invalidsecretkey" !== s.exception.errorcode) { var n = Object.assign({}, l);
                n.series = [{ name: M.util.get_string("visitsonlms", "local_edwiserreports"), data: s.visits }], n.xaxis.categories = s.labels, n.chart.toolbar.show = s.labels.length > 30, n.chart.zoom.enabled = s.labels.length > 30, n.tooltip.y.title.formatter = function() { return M.util.get_string("visits", "local_edwiserreports") + ": " }, o.insight(r.INSIGHT, s.insight),
                    function(e, i) { null !== a && a.destroy(), (a = new t(e.get(0), i)).render(), setTimeout(function() { o.loader.hide(r.PANEL) }, 1e3) }(e(r.PANEL).find(r.GRAPH), n) } else i("visitsonsiteblock", s) }).fail(function(e) { o.loader.hide(r.PANEL) }) } return { init: function(t) { e(r.PANEL).length && (n(t), e(r.PANEL).find(".singleselect").select2()) } } });
//# sourceMappingURL=block_visitsonsite.min.js.map