"use strict";define(["jquery","./common","./defaultconfig","core/notification","./select2","./jquery.dataTables","./dataTables.bootstrap4","./jquery-asPieProgress"],function(e,t,a,i){var n={PAGE:"#wdm-certificates-individual",TABLE:"#wdm-certificates-individual .table",COHORT:"#wdm-certificates-individual .cohort-select",CERTIFICATE:"#wdm-certificates-individual .certificate-select",SEARCH:"#wdm-certificates-individual .table-search-input input",LENGTH:"#wdm-certificates-individual .table-length-select select"},r=null,s={cohort:0,certificateid:0},o={GET_CERTIFICATES:function(){return e.ajax({url:a.requestUrl,type:a.requestType,dataType:a.requestDataType,data:{action:"get_certificates_data_ajax",secret:M.local_edwiserreports.secret,lang:e("html").attr("lang"),data:JSON.stringify(s)}})}};function c(){r&&r.destroy(),t.loader.show(n.PAGE),o.GET_CERTIFICATES().done(function(a){r=e(n.TABLE).DataTable({data:a.data,dom:'<"edwiserreports-table"i<t><"table-pagination"p>>',columnDefs:[{targets:0,className:"align-middle"},{targets:1,className:"align-middle"},{targets:"_all",className:"align-middle text-center"}],columns:[{data:"username"},{data:"email"},{data:"issuedate"},{data:"dateenrolled"},{data:"grade"},{data:"courseprogress"}],language:{info:M.util.get_string("tableinfo","local_edwiserreports"),infoEmpty:M.util.get_string("infoempty","local_edwiserreports"),emptyTable:M.util.get_string("nocertificatesawarded","local_edwiserreports"),zeroRecords:M.util.get_string("zerorecords","local_edwiserreports"),paginate:{previous:" ",next:" "}},initComplete:function(t,a){e(".pie-progress").asPieProgress()},drawCallback:function(){t.stylePaginationButton(this),e(n.PAGE).find(".pie-progress").asPieProgress({namespace:"pie-progress",speed:30,classes:{svg:"pie-progress-svg",element:"pie-progress",number:"pie-progress-number",content:"pie-progress-content"}})},responsive:!0})}).fail(i.exception).always(function(){t.loader.hide(n.PAGE)})}return{init:function(a){e(document).ready(function(){e(document).find(".singleselect").select2(),s.certificateid=e(n.CERTIFICATE).val(),c(),e(document).on("change",n.CERTIFICATE,function(){s.certificateid=e(this).val(),c(),e('.download-links input[name="filter"]').val(s.certificateid)}),e(document).on("change",n.COHORT,function(){s.cohort=e(this).val(),c(),e('.download-links input[name="cohortid"]').val(s.cohort)}),e(n.LENGTH).on("change",function(){r.page.len(this.value).draw()}),e(n.SEARCH).on("input",function(){r.search(this.value).draw()}),t.handleSearchInput()})}}});
//# sourceMappingURL=certificates.min.js.map
