"use strict";define(["jquery","core/ajax","core/notification","./defaultconfig"],function(e,n,t,r){var i={IS_INSTALLED:function(){return e.ajax({url:r.requestUrl,type:r.requestType,dataType:r.requestDataType,data:{action:"is_installed_ajax"}})},GET_TRACKING_DETAILS:function(e){return n.call([{methodname:"local_edwiserreports_get_tracking_details",args:{contextid:e}}])[0]},KEEP_ALIVE:function(e,t){return n.call([{methodname:"local_edwiserreports_keep_alive",args:{id:e,frequency:t}}],!0,!1,!0)[0]}},a=null,o=null,c=0;function u(e){i.KEEP_ALIVE(e,c),c=0}return{init:function(){i.IS_INSTALLED().done(function(e){e.installed&&i.GET_TRACKING_DETAILS(M.cfg.contextid).done(function(e){!1!==e.status&&(window.addEventListener("beforeunload",function(n){u(e.id),clearInterval(o),clearInterval(a)}),o=setInterval(function(){c++},1e3),a=setInterval(function(){u(e.id)},1e3*e.frequency))}).fail(t.exception)})}}}),require(["local_edwiserreports/tracker"],function(e){$(document).ready(function(){e.init()})});
//# sourceMappingURL=tracker.min.js.map
