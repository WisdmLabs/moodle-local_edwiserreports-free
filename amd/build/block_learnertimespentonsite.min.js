"use strict";define(["jquery","core/notification","./chart/apexcharts","./common","./defaultconfig","local_edwiserreports/jquery","local_edwiserreports/flatpickr","./select2"],function(e,t,a,o,r,l){var i=null,n={date:"weekly"};const s={series:[],chart:{type:"line",height:350,dropShadow:{enabled:!0,color:"#000",top:18,left:7,blur:10,opacity:.2},toolbar:{show:!1,tools:{download:!1,reset:'<i class="fa fa-refresh"></i>'}},zoom:{enabled:!1}},markers:{size:0},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,followCursor:!1,intersect:!1,inverseOrder:!1,fillSeriesColor:!1,onDatasetHover:{highlightDataSeries:!1},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0},y:{title:{}}},stroke:{curve:"smooth",width:2},grid:{borderColor:"#e7e7e7"},xaxis:{categories:null,type:"datetime",labels:{hideOverlappingLabels:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:""}},tooltip:{enabled:!1}},legend:{position:"top",horizontalAlign:"left",offsetY:"-20",itemMargin:{horizontal:10,vertical:0}},dataLabels:{enabled:!1},colors:[r.getColorTheme()[2]]};var d={PANEL:"#learnertimespentonsiteblock",GRAPH:"#apex-chart-learnertimespentonsite-block"},c={GET_TIMESPENTONSITE:function(){return e.ajax({url:r.requestUrl,type:r.requestType,dataType:r.requestDataType,data:{action:"get_learnertimespentonsite_graph_data_ajax",secret:M.local_edwiserreports.secret,lang:e("html").attr("lang")}})}};function p(){let r;o.loader.show(d.PANEL),c.GET_TIMESPENTONSITE(n).done(function(t){(r=Object.assign({},s)).yaxis={labels:{formatter:o.timeFormatter}},r.xaxis.categories=t.labels,r.series=[{name:M.util.get_string("timespentonlms","local_edwiserreports"),data:t.timespent}],r.chart.toolbar.show=t.labels.length>30,r.chart.zoom.enabled=t.labels.length>30,r.tooltip.y.title.formatter=(e=>M.util.get_string("time","local_edwiserreports")+": "),e(d.PANEL).find(".panel-body").attr("data-charttype","line"),function(e,t){null!==i&&i.destroy(),(i=new a(e.get(0),t)).render(),setTimeout(function(){o.loader.hide(d.PANEL)},1e3)}(e(d.PANEL).find(d.GRAPH),r),o.loader.hide(d.PANEL)}).fail(function(e){t.exception(e),o.loader.hide(d.PANEL)})}return{init:function(t){0!=e(d.PANEL).length&&(l(d.PANEL).find(d.DATEPICKERINPUT).flatpickr({mode:"range",altInput:!0,altFormat:"d/m/Y",dateFormat:"Y-m-d",maxDate:"today",appendTo:e(d.PANEL).find(d.DATEPICKER).get(0)}),p())}}});
//# sourceMappingURL=block_learnertimespentonsite.min.js.map
