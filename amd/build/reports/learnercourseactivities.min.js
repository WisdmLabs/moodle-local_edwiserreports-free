"use strict";define("local_edwiserreports/reports/learnercourseactivities",["jquery","core/notification","core/ajax","local_edwiserreports/common","local_edwiserreports/defaultconfig","local_edwiserreports/jquery","local_edwiserreports/select2","local_edwiserreports/flatpickr"],function(e,t,r,a,s,i){var l={PAGE:"#learnercourseactivities",SEARCH:"#learnercourseactivities .table-search-input input",COURSE:"#learnercourseactivities .course-select",STUDENT:"#learnercourseactivities .student-select",SECTION:"#learnercourseactivities .section-select",MODULE:"#learnercourseactivities .module-select",SUMMARY:"#learnercourseactivities .summary-card",COMPLETION:"#learnercourseactivities .completion-select",LENGTH:"#learnercourseactivities .length-select",LEARNER:"#learnercourseactivities .student-select",TABLE:"#learnercourseactivities table",FORMFILTER:'#learnercourseactivities .download-links [name="filter"]'},n=null,o={learner:null,course:null,section:0,module:"all",completion:"all"},c={GET_DATA:function(t){return e.ajax({url:s.requestUrl,type:s.requestType,dataType:s.requestDataType,data:{action:"get_learnercourseactivities_data",secret:M.local_edwiserreports.secret,lang:e("html").attr("lang"),data:JSON.stringify(t)}})},GET_FILTER_DATA:function(e,t,a){return r.call([{methodname:"local_edwiserreports_get_filter_data",args:{types:e,course:t,section:a}}],!1)[0]},GET_SUMMARY_CARD_DATA:function(e){return r.call([{methodname:"local_edwiserreports_get_summary_card_data",args:{report:"\\local_edwiserreports\\reports\\learnercourseactivities",filters:JSON.stringify(e)}}],!1)[0]}};function d(){o=JSON.parse(e(l.FORMFILTER).val()),e(l.COURSE).select2({templateResult:function(t){return t.id?e('<span class="pl-3 d-block">'+t.text+"</span>"):t.text}}),e(l.PAGE).find(".singleselect").not(l.COURSE).select2(),function(){a.loader.show(l.PAGE),e(l.FORMFILTER).val(JSON.stringify(o));let r=[`<span class="danger-tag">${M.util.get_string("notyetstarted","core_completion")}</span>`,`<span class="success-tag">${M.util.get_string("completed","core_completion")}</span>`,`<span class="warning-tag">${M.util.get_string("inprogress","core_completion")}</span>`];c.GET_DATA(o).done(function(t){null!==n&&(n.destroy(),n=null),M.util.get_string("never","local_edwiserreports"),(n=e(l.TABLE).DataTable({data:t,paging:!0,deferRendering:!0,columnDefs:[{className:"fixed-column",targets:0},{className:"text-left",targets:[0,1,2]},{className:"text-right",targets:"_all"}],columns:[{data:"activity",width:"10rem"},{data:"type",width:"10rem"},{data:"status",render:function(e){return r[e]},width:"4rem"},{data:"completedon",width:"8rem"},{data:"grade"},{data:"gradedon",width:"11rem"},{data:"attempts"},{data:"highestgrade",width:"4rem"},{data:"lowestgrade",width:"4rem"},{data:"firstaccess",width:"13rem"},{data:"lastaccess",width:"13rem"},{data:"visits"},{data:"timespent"}],dom:'<"edwiserreports-table"i<t><"table-pagination"p>>',language:{info:M.util.get_string("tableinfo","local_edwiserreports"),infoEmpty:M.util.get_string("infoempty","local_edwiserreports"),emptyTable:M.util.get_string("emptytable","local_edwiserreports"),zeroRecords:M.util.get_string("zerorecords","local_edwiserreports"),paginate:{previous:" ",next:" "}},drawCallback:function(){a.stylePaginationButton(this),a.loader.hide(l.PAGE)}})).columns(0).search(e(l.SEARCH).val()),n.page.len(e(l.LENGTH).val()).draw()}).fail(function(e){t.exception(e),a.loader.hide(l.PAGE)})}(),a.handleSearchInput(),a.handleReportCapability()}return{init:function(){e(document).ready(function(){d()})}}});
//# sourceMappingURL=learnercourseactivities.min.js.map
