{"version":3,"sources":["reports/completion.js"],"names":["define","$","Ajax","Notification","common","CFG","SELECTOR","PAGE","EXPORT","COHORT","COURSE","GROUP","EXCLUDE","INACTIVE","PROGRESS","GRADE","LENGTH","SEARCH","PAGETITLE","FORMFILTER","DATE","DATEMENU","DATEITEM","DATEPICKER","DATEPICKERINPUT","SUMMARY","filter","cohort","course","group","exclude","enrolment","inactive","progress","grade","flatpickr","dataTable","PROMISES","GET_DATA","ajax","url","requestUrl","type","requestType","dataType","requestDataType","data","action","sesskey","M","local_edwiserreports","secret","lang","attr","JSON","stringify","GET_SUMMARY_CARD_DATA","courseid","cohortid","groupid","call","methodname","args","report","initializeDatatable","loader","show","find","val","done","response","destroy","text","name","DataTable","dom","pageLength","deferRendering","language","info","util","get_string","infoEmpty","emptyTable","zeroRecords","paginate","previous","next","columnDefs","className","targets","columns","drawCallback","stylePaginationButton","this","initComplete","hide","search","page","len","draw","fail","ex","exception","reloadFilter","types","callback","_init","CONTEXTID","updateTimeLabel","handleSearchInput","not","select2","placeholder","allowClear","mode","altInput","altFormat","dateFormat","maxDate","appendTo","get","onOpen","addClass","setTimeout","offset","left","parent","css","closest","onChange","onClose","date","dateAlternate","removeClass","replace","includes","html","clear","on","concat","length","parse","refreshSummarycard","value","column","toggleClass","toggle","indexOf","init","document","ready"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n/**\n * Course Completion report page.\n *\n * @package\n * @author      Yogesh Shirsath\n * @copyright   2022 wisdmlabs <support@wisdmlabs.com>\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine('local_edwiserreports/reports/completion', [\n    'jquery',\n    'core/ajax',\n    'core/notification',\n    'local_edwiserreports/common',\n    'local_edwiserreports/defaultconfig',\n    'local_edwiserreports/select2',\n    'local_edwiserreports/flatpickr'\n], function($, Ajax, Notification, common, CFG) {\n\n    /**\n     * Selectors list.\n     */\n    var SELECTOR = {\n        PAGE: \".report-content\",\n        EXPORT: \".report-export\",\n        COHORT: \".report-content .cohort-select\",\n        COURSE: \".report-content .course-select\",\n        GROUP: \".report-content .group-select\",\n        EXCLUDE: '.report-content .exclude-select',\n        INACTIVE: '.report-content .inactive-select',\n        PROGRESS: '.report-content .progress-select',\n        GRADE: '.report-content .grade-select',\n        LENGTH: \".report-content .length-select\",\n        SEARCH: \".report-content .table-search-input input\",\n        PAGETITLE: \".report-header .page-title h2\",\n        FORMFILTER: '.report-content .download-links [name=\"filter\"]',\n        DATE: '.edwiserreports-calendar',\n        DATEMENU: '.edwiserreports-calendar + .dropdown-menu',\n        DATEITEM: '.edwiserreports-calendar + .dropdown-menu .dropdown-item',\n        DATEPICKER: '.edwiserreports-calendar + .dropdown-menu .dropdown-calendar',\n        DATEPICKERINPUT: '.edwiserreports-calendar + .dropdown-menu .flatpickr',\n        SUMMARY: '#wdm-completion-individual .summary-card'\n    };\n\n    /**\n     * Filter object.\n     */\n    var filter = {\n        cohort: 0,\n        course: null,\n        group: 0,\n        exclude: [],\n        enrolment: 'all',\n        inactive: 'all',\n        progress: 'all',\n        grade: 'all',\n    };\n\n    /**\n     * Flat picker object.\n     */\n    let flatpickr = null;\n\n    /**\n     * Datatable object.\n     */\n    var dataTable = null;\n\n    /**\n     * Promise lists.\n     */\n    let PROMISES = {\n        /**\n         * Get all courses summary table data based on filters.\n         * @returns {PROMISE}\n         */\n        GET_DATA: function() {\n            return $.ajax({\n                url: CFG.requestUrl,\n                type: CFG.requestType,\n                dataType: CFG.requestDataType,\n                data: {\n                    action: 'get_completion_data_ajax',\n                    sesskey: M.local_edwiserreports.secret,\n                    lang: $('html').attr('lang'),\n                    data: JSON.stringify(filter)\n                },\n            });\n        },\n        /**\n         * Get summary card data.\n         *\n         * @param   {Integer}   courseid    Course id\n         * @param   {String}    cohortid   Cohort id all/id\n         * @param   {String}    groupid   group id all/id\n         * @returns {PROMISE}\n         */\n        GET_SUMMARY_CARD_DATA: function(courseid, cohortid, groupid) {\n            return Ajax.call([{\n                methodname: 'local_edwiserreports_get_summary_card_data',\n                args: {\n                    report: 'completionblock',\n                    course: courseid,\n                    cohort: cohortid,\n                    group: groupid\n                }\n            }], false)[0];\n        }\n    };\n\n    /**\n     * After Select Custom date get active users details.\n     */\n    function customDateSelected() {\n        let date = $(SELECTOR.DATEPICKERINPUT).val(); // Y-m-d format\n        let dateAlternate = $(SELECTOR.DATEPICKERINPUT).next().val().replace(\"to\", \"-\"); // D M Y format\n        $(SELECTOR.DATEPICKERINPUT).next().val(dateAlternate);\n\n        /* If correct date is not selected then return false */\n        if (!date.includes(\" to \")) {\n            flatpickr.clear();\n            return;\n        }\n\n        // Set active class to custom date selector item.\n        $(SELECTOR.DATEITEM).removeClass('active');\n        $(SELECTOR.DATEITEM + '.custom').addClass('active');\n\n        // Show custom date to dropdown button.\n        $(SELECTOR.DATE).html(dateAlternate);\n\n        filter.enrolment = date;\n        initializeDatatable();\n        common.updateTimeLabel(date);\n    }\n\n    /**\n     * Get Course Completion\n     */\n    function initializeDatatable() {\n        common.loader.show(SELECTOR.PAGE);\n\n        $(SELECTOR.PAGE).find('.download-links input[name=\"filter\"]').val(JSON.stringify(filter));\n        PROMISES.GET_DATA(filter).done(function(response) {\n            if (dataTable !== null) {\n                dataTable.destroy();\n            }\n            $(SELECTOR.PAGETITLE).text(response.name);\n            dataTable = $(SELECTOR.PAGE).find(\".table\").DataTable({\n                dom: '<\"edwiserreports-table\"<\"table-filter d-flex\"i><t><\"table-pagination\"p>>',\n                data: response.data,\n                pageLength: $(SELECTOR.LENGTH).val(),\n                deferRendering: true,\n                language: {\n                    info: M.util.get_string('tableinfo', 'local_edwiserreports'),\n                    infoEmpty: M.util.get_string('infoempty', 'local_edwiserreports'),\n                    emptyTable: M.util.get_string('nostudentsenrolled', 'local_edwiserreports'),\n                    zeroRecords: M.util.get_string('zerorecords', 'local_edwiserreports'),\n                    paginate: {\n                        previous: \"&#9666\",\n                        next: \"&#9656\"\n                    }\n                },\n                columnDefs: [\n                    {className: \"fixed-column\", targets: 0},\n                    {className: \"text-left\", targets: [0, 1, 2]},\n                    {className: \"text-right\", targets: \"_all\"}\n                ],\n                columns: [\n                    {data: \"username\"},\n                    {data: \"enrolledon\"},\n                    {data: \"enrolltype\"},\n                    {data: \"noofvisits\"},\n                    {data: \"completion\"},\n                    {data: \"compleiontime\"},\n                    {data: \"grade\"},\n                    {data: \"lastaccess\"}\n                ],\n                drawCallback: function() {\n                    common.stylePaginationButton(this);\n                },\n                initComplete: function() {\n                    common.loader.hide(SELECTOR.PAGE);\n                }\n            });\n            dataTable.columns(0).search($(SELECTOR.SEARCH).val());\n            dataTable.page.len($(SELECTOR.LENGTH).val()).draw();\n        }).fail(function(ex) {\n            Notification.exception(ex);\n            common.loader.hide(SELECTOR.PAGE);\n        });\n    }\n\n    /**\n     * Reload filters.\n     * @param {array} types Types\n     * @param {number} cohort Cohort id\n     * @param {number} course Course id\n     * @param {function} callback Callback function\n     */\n    function reloadFilter(types, cohort, course, callback) {\n        common.loader.show(SELECTOR.PAGE);\n        common.reloadFilter(\n            SELECTOR.PAGE,\n            types,\n            cohort,\n            course,\n            0,\n            callback\n        );\n    }\n\n    /* eslint-disable no-unused-vars */\n    /**\n     * Initialize\n     * @param {integer} CONTEXTID Current page context id\n     */\n    function init(CONTEXTID) {\n\n        // Show time period in table info.\n        common.updateTimeLabel('all');\n\n\n        common.handleSearchInput();\n\n        // Initialize select2.\n        $(SELECTOR.PAGE).find('.singleselect').not(SELECTOR.EXCLUDE).select2();\n        $(SELECTOR.EXCLUDE).select2({\n            placeholder: M.util.get_string('exclude', 'local_edwiserreports'),\n            allowClear: true\n        });\n\n        flatpickr = $(SELECTOR.DATEPICKERINPUT).flatpickr({\n            mode: 'range',\n            altInput: true,\n            altFormat: \"d M Y\",\n            dateFormat: \"Y-m-d\",\n            maxDate: \"today\",\n            appendTo: $(SELECTOR.DATEPICKER).get(0),\n            onOpen: function() {\n                $(SELECTOR.DATEMENU).addClass('withcalendar');\n                setTimeout(function() {\n                    if ($(SELECTOR.DATEMENU).offset().left < $(SELECTOR.PAGE).parent().offset().left) {\n                        $(SELECTOR.DATEMENU).css('left', $(SELECTOR.DATEMENU).closest('.filter-selector').css('padding-left'));\n                    }\n                }, 500);\n            },\n            onChange: function() {\n                if ($(SELECTOR.DATEMENU).offset().left < $(SELECTOR.PAGE).parent().offset().left) {\n                    $(SELECTOR.DATEMENU).css('left', $(SELECTOR.DATEMENU).closest('.filter-selector').css('padding-left'));\n                }\n            },\n            onClose: function() {\n                $(SELECTOR.DATEMENU).removeClass('withcalendar');\n                customDateSelected();\n            }\n        });\n\n\n        /* Date selector listener */\n        $('body').on('click', SELECTOR.DATEITEM + \":not(.custom)\", function() {\n            // Set custom selected item as active.\n            $(SELECTOR.DATEITEM).removeClass('active');\n            $(this).addClass('active');\n\n            // Show selected item on dropdown button.\n            $(SELECTOR.DATE).html($(this).text());\n\n            // Clear custom date.\n            flatpickr.clear();\n\n            filter.enrolment = $(this).data('value');\n            initializeDatatable();\n            common.updateTimeLabel(filter.enrolment);\n        });\n\n        // Get course id\n        filter.course = $(SELECTOR.COURSE).val();\n\n        // Select cohort filter for completion table.\n        $('body').on('change', SELECTOR.COHORT, function() {\n            filter.cohort = $(this).val();\n            filter.group = 0;\n            reloadFilter(['course', 'noallcourses'], filter.cohort, filter.course, function() {\n                if ($(SELECTOR.COURSE).find(`option[value=\"${filter.course}\"]`).length == 0) {\n                    filter.course = $(SELECTOR.COURSE).find(`option:first`).attr('value');\n                }\n                reloadFilter(['group'], filter.cohort, filter.course, function() {\n                    initializeDatatable();\n                });\n            });\n        });\n\n        // Select course filter for completion table.\n        $('body').on('change', SELECTOR.COURSE, function() {\n            filter.course = $(this).val();\n            filter.group = 0;\n\n            PROMISES.GET_SUMMARY_CARD_DATA(filter.course, filter.cohort, filter.group)\n            .done(function(response) {\n                response = JSON.parse(response);\n                common.refreshSummarycard('group', response, SELECTOR.SUMMARY, function() {\n                //     InitializeDatatable();\n                });\n            });\n\n\n            reloadFilter(['group'], filter.cohort, filter.course, function() {\n                initializeDatatable();\n            });\n        });\n\n        // Select group filter for completion table.\n        $('body').on('change', SELECTOR.GROUP, function() {\n            filter.group = $(this).val();\n            initializeDatatable();\n\n        });\n\n        // Observer length change.\n        $('body').on('change', SELECTOR.LENGTH, function() {\n            dataTable.page.len(this.value).draw();\n        });\n\n        // Search in table.\n        $('body').on('input', SELECTOR.SEARCH, function() {\n            dataTable.column(0).search(this.value).draw();\n        });\n\n        // Observer exclude change.\n        $('body').on('change', SELECTOR.EXCLUDE, function() {\n            filter.exclude = $(this).val();\n            $(this).toggleClass('notselected', filter.exclude.length == 0);\n            $(this).toggleClass('selected', filter.exclude.length != 0);\n            // Display none to inactive users if exclude is selected.\n            $(SELECTOR.INACTIVE).closest('.filter-selector')\n                .toggle(filter.exclude.indexOf('2') == -1 && filter.exclude.indexOf('3') == -1);\n            initializeDatatable();\n        });\n\n        // Observer progress change.\n        $('body').on('change', SELECTOR.PROGRESS, function() {\n            filter.progress = $(this).val();\n            initializeDatatable();\n        });\n\n        // Observer inactive users change.\n        $('body').on('change', SELECTOR.INACTIVE, function() {\n            filter.inactive = $(this).val();\n            initializeDatatable();\n        });\n\n        // Observer grade change.\n        $('body').on('change', SELECTOR.GRADE, function() {\n            filter.grade = $(this).val();\n            initializeDatatable();\n        });\n\n        initializeDatatable();\n    }\n\n    return {\n        init: function(CONTEXTID) {\n            $(document).ready(function() {\n                init(CONTEXTID);\n            });\n        }\n    };\n\n});\n"],"file":"completion.min.js"}