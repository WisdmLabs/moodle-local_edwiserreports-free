"use strict";define("local_edwiserreports/reports/certificates",["jquery","core/notification","local_edwiserreports/common","local_edwiserreports/defaultconfig","local_edwiserreports/select2","local_edwiserreports/jquery.dataTables","local_edwiserreports/dataTables.bootstrap4","local_edwiserreports/jquery-asPieProgress"],function(e,t,a,r){var i={PAGE:"#certificates",TABLE:"#certificates .table",COHORT:"#certificates .cohort-select",CERTIFICATE:"#certificates .certificate-select",SEARCH:"#certificates .table-search-input input",LENGTH:"#certificates .length-select"},s=null,o={cohort:0,certificateid:0},n={GET_CERTIFICATES:function(){return e.ajax({url:r.requestUrl,type:r.requestType,dataType:r.requestDataType,data:{action:"get_certificates_data_ajax",secret:M.local_edwiserreports.secret,lang:e("html").attr("lang"),data:JSON.stringify({filter:o})}})}};function l(){s&&s.destroy(),a.loader.show(i.PAGE),n.GET_CERTIFICATES().done(function(t){(s=e(i.TABLE).DataTable({data:t.data,dom:'<"edwiserreports-table"i<t><"table-pagination"p>>',columnDefs:[{targets:0,className:"align-middle"},{targets:1,className:"align-middle"},{targets:"_all",className:"align-middle text-center"}],columns:[{data:"username"},{data:"email"},{data:"issuedate"},{data:"dateenrolled"},{data:"grade"},{data:"courseprogress"}],language:{info:M.util.get_string("tableinfo","local_edwiserreports"),infoEmpty:M.util.get_string("infoempty","local_edwiserreports"),emptyTable:M.util.get_string("nocertificatesawarded","local_edwiserreports"),zeroRecords:M.util.get_string("zerorecords","local_edwiserreports"),paginate:{previous:"&#9666",next:"&#9656"}},initComplete:function(t,a){e(".pie-progress").asPieProgress()},drawCallback:function(){a.stylePaginationButton(this),e(i.PAGE).find(".pie-progress").asPieProgress({namespace:"pie-progress",speed:30,classes:{svg:"pie-progress-svg",element:"pie-progress",number:"pie-progress-number",content:"pie-progress-content"}})},responsive:!0})).columns(0).search(e(i.SEARCH).val()),console.log(e(i.LENGTH).val()),s.page.len(e(i.LENGTH).val()).draw()}).fail(t.exception).always(function(){a.loader.hide(i.PAGE)})}function c(t){e(document).find(".singleselect").select2(),o.certificateid=e(i.CERTIFICATE).val(),l(),e(document).on("change",i.CERTIFICATE,function(){o.certificateid=e(this).val(),l(),e('.download-links input[name="filter"]').val(o.certificateid)}),e(document).on("change",i.COHORT,function(){o.cohort=e(this).val(),l(),e('.download-links input[name="cohortid"]').val(o.cohort)}),e(i.LENGTH).on("change",function(){s.page.len(this.value).draw()}),e(i.SEARCH).on("input",function(){s.search(this.value).draw()}),a.handleSearchInput()}return{init:function(){e(document).ready(c)}}});
//# sourceMappingURL=certificates.min.js.map
