"use strict";define(["jquery","core/chartjs","local_edwiserreports/defaultconfig","local_edwiserreports/variables","local_edwiserreports/select2"],function(a,e,t,s){return{init:function(){var l=null,o=t.getPanel("#lpstatsblock"),n=t.getPanel("#lpstatsblock","body"),r=n+" #wdm-lpstats-select",d=o+" .dropdown-menu[aria-labelledby='export-dropdown'] .dropdown-item",c=n+" .ct-chart",i=n+" .loader",p=!1;function u(s){a.ajax({url:t.requestUrl,type:t.requestType,dataType:t.requestDataType,sesskey:a(o).data("sesskey"),data:{action:"get_lpstats_data_ajax",sesskey:a(o).data("sesskey"),data:JSON.stringify({lpid:s})}}).done(function(a){!function(a){if(p){p.graph.labels=a.labels,p.graph.data=a.data;var t={labels:p.graph.labels,datasets:[{data:p.graph.data,backgroundColor:p.graph.backgroundColor}]};l=new e(p.ctx,{data:t,type:p.graph.type,options:p.graph.options})}}(a.data)}).fail(function(a){console.log(a)}).always(function(){a(i).addClass("d-none"),a(c).removeClass("d-none")})}a(document).ready(function(){var e=a(r).val();(p=t.getLpStatsBlock())&&(u(e),a(n+" .singleselect").select2(),a(r).on("change",function(){e=a(this).val(),a(c).addClass("d-none"),a(i).removeClass("d-none"),t.changeExportUrl(e,d,s.filterReplaceFlag),l.destroy(),u(e)}))})}}});
//# sourceMappingURL=block_lpstats.min.js.map
