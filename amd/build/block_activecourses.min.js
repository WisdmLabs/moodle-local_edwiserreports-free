"use strict";define(["jquery","./defaultconfig","./common"],function(e,t,r){var a={PANEL:"#activecoursesblock",TABLE:"#activecoursesblock table",SEARCH:".table-search-input input",USERS:"#activecoursesblock table a.modal-trigger"},o=null,l={GET_ACTIVECOURSES:function(){return e.ajax({url:t.requestUrl,type:t.requestType,dataType:t.requestDataType,data:{action:"get_activecourses_data_ajax",secret:M.local_edwiserreports.secret,lang:e("html").attr("lang")}})}};return{init:function(t){0!==e(a.PANEL).length&&(e(a.PANEL).find(".singleselect").select2({selectionTitleAttribute:!1}),r.loader.show(a.PANEL),l.GET_ACTIVECOURSES().done(function(t){null!==o&&o.destroy(),(o=e(a.TABLE).DataTable({responsive:!0,data:t.data,dom:'<"edwiserreports-table"<t><"table-pagination"p>>',aaSorting:[[2,"desc"]],aoColumns:[null,null,{orderSequence:["desc"]},{orderSequence:["desc"]},{orderSequence:["desc"]}],language:{info:M.util.get_string("tableinfo","local_edwiserreports"),infoEmpty:M.util.get_string("infoempty","local_edwiserreports"),emptyTable:M.util.get_string("nocourses","local_edwiserreports"),zeroRecords:M.util.get_string("zerorecords","local_edwiserreports"),paginate:{previous:M.util.get_string("previous","moodle"),next:M.util.get_string("next","moodle")}},drawCallback:function(){r.stylePaginationButton(this)},columnDefs:[{targets:0,className:"text-left pl-5",orderable:!1},{targets:1,className:"text-left",orderable:!1},{targets:"_all",className:"text-center"}],lengthChange:!1,bInfo:!1})).on("order.dt",function(){o.column(0,{order:"applied"}).nodes().each(function(e,t){var r="";t>=0&&t<=2&&(r="<img class='ml-1' src='"+M.util.image_url("trophy/"+["gold","silver","bronze"][t],"local_edwiserreports")+"'></img>"),e.innerHTML=t+1+r}),e(a.TABLE+" td:not(.bg-secondary)").addClass("bg-white")}).draw()}).fail(function(e){console.log(e)}).always(function(){r.loader.hide(a.PANEL)}),e("body").on("input","".concat(a.PANEL," ").concat(a.SEARCH),function(){o.columns(1).search(e(this).val()).draw()}))}}});
//# sourceMappingURL=block_activecourses.min.js.map
